
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2017 by Digital Mars
    All Rights Reserved Written by Walter Bright
    http://digitalmars.com
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>std.experimental.allocator - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='std.experimental.allocator' class='std'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href=".."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.freenode.net/d'>IRC</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.php'>Issues</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option  value="dlang.org/spec">Language</option>
                    <option selected value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
<div class="subnav-helper"></div> <div class="subnav">    <div class="head">        <h2>Library Reference</h2>
        <p><span class="smallprint">pre-release version <span class="separator"><br></span>
            switch to <a href="../phobos/index.html">2.072.0</a>. <br>
            <a href="../library-prerelease/index.html">preview</a> beta library reference.
            </span>
        </p>
        <p><a href="index.html">overview</a></p>
    </div>
    <ul>
<li><a href='object.html'><span><em class="tt">object</em></span></a></li>

<li class='expand-container'><a class='expand-toggle' href='#'><span><em class="tt">std</em></span></a>
<ul><li>  <a href="std_algorithm.html" title="std.algorithm"><span class="d_inlinecode donthyphenate notranslate">algorithm</span></a><ul><li>    <a href="std_algorithm_comparison.html" title="std.algorithm.comparison"><span class="d_inlinecode donthyphenate notranslate">comparison</span></a></li><li>    <a href="std_algorithm_iteration.html" title="std.algorithm.iteration"><span class="d_inlinecode donthyphenate notranslate">iteration</span></a></li><li>    <a href="std_algorithm_mutation.html" title="std.algorithm.mutation"><span class="d_inlinecode donthyphenate notranslate">mutation</span></a></li><li>    <a href="std_algorithm_searching.html" title="std.algorithm.searching"><span class="d_inlinecode donthyphenate notranslate">searching</span></a></li><li>    <a href="std_algorithm_setops.html" title="std.algorithm.setops"><span class="d_inlinecode donthyphenate notranslate">setops</span></a></li><li>    <a href="std_algorithm_sorting.html" title="std.algorithm.sorting"><span class="d_inlinecode donthyphenate notranslate">sorting</span></a>
  </li></ul></li><li>  <a href="std_array.html" title="std.array"><span class="d_inlinecode donthyphenate notranslate">array</span></a></li><li>  <a href="std_ascii.html" title="std.ascii"><span class="d_inlinecode donthyphenate notranslate">ascii</span></a></li><li>  <a href="std_base64.html" title="std.base64"><span class="d_inlinecode donthyphenate notranslate">base64</span></a></li><li>  <a href="std_bigint.html" title="std.bigint"><span class="d_inlinecode donthyphenate notranslate">bigint</span></a></li><li>  <a href="std_bitmanip.html" title="std.bitmanip"><span class="d_inlinecode donthyphenate notranslate">bitmanip</span></a></li><li>  <a href="std_compiler.html" title="std.compiler"><span class="d_inlinecode donthyphenate notranslate">compiler</span></a></li><li>  <a href="std_complex.html" title="std.complex"><span class="d_inlinecode donthyphenate notranslate">complex</span></a></li><li>  <a href="std_concurrency.html" title="std.concurrency"><span class="d_inlinecode donthyphenate notranslate">concurrency</span></a></li><li>  <a href="std_concurrencybase.html" title="std.concurrencybase"><span class="d_inlinecode donthyphenate notranslate">concurrencybase</span></a></li><li>  <a href="std_container.html" title="std.container"><span class="d_inlinecode donthyphenate notranslate">container</span></a><ul><li>    <a href="std_container_array.html" title="std.container.array"><span class="d_inlinecode donthyphenate notranslate">array</span></a></li><li>    <a href="std_container_binaryheap.html" title="std.container.binaryheap"><span class="d_inlinecode donthyphenate notranslate">binaryheap</span></a></li><li>    <a href="std_container_dlist.html" title="std.container.dlist"><span class="d_inlinecode donthyphenate notranslate">dlist</span></a></li><li>    <a href="std_container_rbtree.html" title="std.container.rbtree"><span class="d_inlinecode donthyphenate notranslate">rbtree</span></a></li><li>    <a href="std_container_slist.html" title="std.container.slist"><span class="d_inlinecode donthyphenate notranslate">slist</span></a></li><li>    <a href="std_container_util.html" title="std.container.util"><span class="d_inlinecode donthyphenate notranslate">util</span></a>
  </li></ul></li><li>  <a href="std_conv.html" title="std.conv"><span class="d_inlinecode donthyphenate notranslate">conv</span></a></li><li>  <a href="std_csv.html" title="std.csv"><span class="d_inlinecode donthyphenate notranslate">csv</span></a></li><li>  <a href="std_datetime.html" title="std.datetime"><span class="d_inlinecode donthyphenate notranslate">datetime</span></a></li><li>  <a href="std_demangle.html" title="std.demangle"><span class="d_inlinecode donthyphenate notranslate">demangle</span></a></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">digest</span></h7><ul><li>    <a href="std_digest_crc.html" title="std.digest.crc"><span class="d_inlinecode donthyphenate notranslate">crc</span></a></li><li>    <a href="std_digest_digest.html" title="std.digest.digest"><span class="d_inlinecode donthyphenate notranslate">digest</span></a></li><li>    <a href="std_digest_hmac.html" title="std.digest.hmac"><span class="d_inlinecode donthyphenate notranslate">hmac</span></a></li><li>    <a href="std_digest_md.html" title="std.digest.md"><span class="d_inlinecode donthyphenate notranslate">md</span></a></li><li>    <a href="std_digest_murmurhash.html" title="std.digest.murmurhash"><span class="d_inlinecode donthyphenate notranslate">murmurhash</span></a></li><li>    <a href="std_digest_ripemd.html" title="std.digest.ripemd"><span class="d_inlinecode donthyphenate notranslate">ripemd</span></a></li><li>    <a href="std_digest_sha.html" title="std.digest.sha"><span class="d_inlinecode donthyphenate notranslate">sha</span></a>
  </li></ul></li><li>  <a href="std_encoding.html" title="std.encoding"><span class="d_inlinecode donthyphenate notranslate">encoding</span></a></li><li>  <a href="std_exception.html" title="std.exception"><span class="d_inlinecode donthyphenate notranslate">exception</span></a></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">experimental</span></h7><ul><li>    <a href="std_experimental_allocator.html" title="std.experimental.allocator"><span class="d_inlinecode donthyphenate notranslate">allocator</span></a><ul><li>      <a href="std_experimental_allocator_building_blocks.html" title="std.experimental.allocator.building_blocks"><span class="d_inlinecode donthyphenate notranslate">building_blocks</span></a><ul><li>        <a href="std_experimental_allocator_building_blocks_affix_allocator.html" title="std.experimental.allocator.building_blocks.affix_allocator"><span class="d_inlinecode donthyphenate notranslate">affix_allocator</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_allocator_list.html" title="std.experimental.allocator.building_blocks.allocator_list"><span class="d_inlinecode donthyphenate notranslate">allocator_list</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_bitmapped_block.html" title="std.experimental.allocator.building_blocks.bitmapped_block"><span class="d_inlinecode donthyphenate notranslate">bitmapped_block</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_bucketizer.html" title="std.experimental.allocator.building_blocks.bucketizer"><span class="d_inlinecode donthyphenate notranslate">bucketizer</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_fallback_allocator.html" title="std.experimental.allocator.building_blocks.fallback_allocator"><span class="d_inlinecode donthyphenate notranslate">fallback_allocator</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_free_list.html" title="std.experimental.allocator.building_blocks.free_list"><span class="d_inlinecode donthyphenate notranslate">free_list</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_free_tree.html" title="std.experimental.allocator.building_blocks.free_tree"><span class="d_inlinecode donthyphenate notranslate">free_tree</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_kernighan_ritchie.html" title="std.experimental.allocator.building_blocks.kernighan_ritchie"><span class="d_inlinecode donthyphenate notranslate">kernighan_ritchie</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_null_allocator.html" title="std.experimental.allocator.building_blocks.null_allocator"><span class="d_inlinecode donthyphenate notranslate">null_allocator</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_quantizer.html" title="std.experimental.allocator.building_blocks.quantizer"><span class="d_inlinecode donthyphenate notranslate">quantizer</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_region.html" title="std.experimental.allocator.building_blocks.region"><span class="d_inlinecode donthyphenate notranslate">region</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_scoped_allocator.html" title="std.experimental.allocator.building_blocks.scoped_allocator"><span class="d_inlinecode donthyphenate notranslate">scoped_allocator</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_segregator.html" title="std.experimental.allocator.building_blocks.segregator"><span class="d_inlinecode donthyphenate notranslate">segregator</span></a></li><li>        <a href="std_experimental_allocator_building_blocks_stats_collector.html" title="std.experimental.allocator.building_blocks.stats_collector"><span class="d_inlinecode donthyphenate notranslate">stats_collector</span></a>
      </li></ul></li><li>      <a href="std_experimental_allocator_common.html" title="std.experimental.allocator.common"><span class="d_inlinecode donthyphenate notranslate">common</span></a></li><li>      <a href="std_experimental_allocator_gc_allocator.html" title="std.experimental.allocator.gc_allocator"><span class="d_inlinecode donthyphenate notranslate">gc_allocator</span></a></li><li>      <a href="std_experimental_allocator_mallocator.html" title="std.experimental.allocator.mallocator"><span class="d_inlinecode donthyphenate notranslate">mallocator</span></a></li><li>      <a href="std_experimental_allocator_mmap_allocator.html" title="std.experimental.allocator.mmap_allocator"><span class="d_inlinecode donthyphenate notranslate">mmap_allocator</span></a></li><li>      <a href="std_experimental_allocator_showcase.html" title="std.experimental.allocator.showcase"><span class="d_inlinecode donthyphenate notranslate">showcase</span></a></li><li>      <a href="std_experimental_allocator_typed.html" title="std.experimental.allocator.typed"><span class="d_inlinecode donthyphenate notranslate">typed</span></a>
    </li></ul></li><li>    <a href="std_experimental_logger.html" title="std.experimental.logger"><span class="d_inlinecode donthyphenate notranslate">logger</span></a><ul><li>      <a href="std_experimental_logger_core.html" title="std.experimental.logger.core"><span class="d_inlinecode donthyphenate notranslate">core</span></a></li><li>      <a href="std_experimental_logger_filelogger.html" title="std.experimental.logger.filelogger"><span class="d_inlinecode donthyphenate notranslate">filelogger</span></a></li><li>      <a href="std_experimental_logger_multilogger.html" title="std.experimental.logger.multilogger"><span class="d_inlinecode donthyphenate notranslate">multilogger</span></a></li><li>      <a href="std_experimental_logger_nulllogger.html" title="std.experimental.logger.nulllogger"><span class="d_inlinecode donthyphenate notranslate">nulllogger</span></a>
    </li></ul></li><li>    <a href="std_experimental_ndslice.html" title="std.experimental.ndslice"><span class="d_inlinecode donthyphenate notranslate">ndslice</span></a><ul><li>      <a href="std_experimental_ndslice_iteration.html" title="std.experimental.ndslice.iteration"><span class="d_inlinecode donthyphenate notranslate">iteration</span></a></li><li>      <a href="std_experimental_ndslice_selection.html" title="std.experimental.ndslice.selection"><span class="d_inlinecode donthyphenate notranslate">selection</span></a></li><li>      <a href="std_experimental_ndslice_slice.html" title="std.experimental.ndslice.slice"><span class="d_inlinecode donthyphenate notranslate">slice</span></a>
    </li></ul></li><li>    <a href="std_experimental_typecons.html" title="std.experimental.typecons"><span class="d_inlinecode donthyphenate notranslate">typecons</span></a>
  </li></ul></li><li>  <a href="std_file.html" title="std.file"><span class="d_inlinecode donthyphenate notranslate">file</span></a></li><li>  <a href="std_format.html" title="std.format"><span class="d_inlinecode donthyphenate notranslate">format</span></a></li><li>  <a href="std_functional.html" title="std.functional"><span class="d_inlinecode donthyphenate notranslate">functional</span></a></li><li>  <a href="std_getopt.html" title="std.getopt"><span class="d_inlinecode donthyphenate notranslate">getopt</span></a></li><li>  <a href="std_json.html" title="std.json"><span class="d_inlinecode donthyphenate notranslate">json</span></a></li><li>  <a href="std_math.html" title="std.math"><span class="d_inlinecode donthyphenate notranslate">math</span></a></li><li>  <a href="std_mathspecial.html" title="std.mathspecial"><span class="d_inlinecode donthyphenate notranslate">mathspecial</span></a></li><li>  <a href="std_meta.html" title="std.meta"><span class="d_inlinecode donthyphenate notranslate">meta</span></a></li><li>  <a href="std_mmfile.html" title="std.mmfile"><span class="d_inlinecode donthyphenate notranslate">mmfile</span></a></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">net</span></h7><ul><li>    <a href="std_net_curl.html" title="std.net.curl"><span class="d_inlinecode donthyphenate notranslate">curl</span></a></li><li>    <a href="std_net_isemail.html" title="std.net.isemail"><span class="d_inlinecode donthyphenate notranslate">isemail</span></a>
  </li></ul></li><li>  <a href="std_numeric.html" title="std.numeric"><span class="d_inlinecode donthyphenate notranslate">numeric</span></a></li><li>  <a href="std_outbuffer.html" title="std.outbuffer"><span class="d_inlinecode donthyphenate notranslate">outbuffer</span></a></li><li>  <a href="std_parallelism.html" title="std.parallelism"><span class="d_inlinecode donthyphenate notranslate">parallelism</span></a></li><li>  <a href="std_path.html" title="std.path"><span class="d_inlinecode donthyphenate notranslate">path</span></a></li><li>  <a href="std_process.html" title="std.process"><span class="d_inlinecode donthyphenate notranslate">process</span></a></li><li>  <a href="std_random.html" title="std.random"><span class="d_inlinecode donthyphenate notranslate">random</span></a></li><li>  <a href="std_range.html" title="std.range"><span class="d_inlinecode donthyphenate notranslate">range</span></a><ul><li>    <a href="std_range_interfaces.html" title="std.range.interfaces"><span class="d_inlinecode donthyphenate notranslate">interfaces</span></a></li><li>    <a href="std_range_primitives.html" title="std.range.primitives"><span class="d_inlinecode donthyphenate notranslate">primitives</span></a>
  </li></ul></li><li>  <a href="std_regex.html" title="std.regex"><span class="d_inlinecode donthyphenate notranslate">regex</span></a></li><li>  <a href="std_signals.html" title="std.signals"><span class="d_inlinecode donthyphenate notranslate">signals</span></a></li><li>  <a href="std_socket.html" title="std.socket"><span class="d_inlinecode donthyphenate notranslate">socket</span></a></li><li>  <a href="std_stdint.html" title="std.stdint"><span class="d_inlinecode donthyphenate notranslate">stdint</span></a></li><li>  <a href="std_stdio.html" title="std.stdio"><span class="d_inlinecode donthyphenate notranslate">stdio</span></a></li><li>  <a href="std_stdiobase.html" title="std.stdiobase"><span class="d_inlinecode donthyphenate notranslate">stdiobase</span></a></li><li>  <a href="std_string.html" title="std.string"><span class="d_inlinecode donthyphenate notranslate">string</span></a></li><li>  <a href="std_system.html" title="std.system"><span class="d_inlinecode donthyphenate notranslate">system</span></a></li><li>  <a href="std_traits.html" title="std.traits"><span class="d_inlinecode donthyphenate notranslate">traits</span></a></li><li>  <a href="std_typecons.html" title="std.typecons"><span class="d_inlinecode donthyphenate notranslate">typecons</span></a></li><li>  <a href="std_typetuple.html" title="std.typetuple"><span class="d_inlinecode donthyphenate notranslate">typetuple</span></a></li><li>  <a href="std_uni.html" title="std.uni"><span class="d_inlinecode donthyphenate notranslate">uni</span></a></li><li>  <a href="std_uri.html" title="std.uri"><span class="d_inlinecode donthyphenate notranslate">uri</span></a></li><li>  <a href="std_utf.html" title="std.utf"><span class="d_inlinecode donthyphenate notranslate">utf</span></a></li><li>  <a href="std_uuid.html" title="std.uuid"><span class="d_inlinecode donthyphenate notranslate">uuid</span></a></li><li>  <a href="std_variant.html" title="std.variant"><span class="d_inlinecode donthyphenate notranslate">variant</span></a></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">windows</span></h7><ul><li>    <a href="std_windows_charset.html" title="std.windows.charset"><span class="d_inlinecode donthyphenate notranslate">charset</span></a></li><li>    <a href="std_windows_syserror.html" title="std.windows.syserror"><span class="d_inlinecode donthyphenate notranslate">syserror</span></a>
  </li></ul></li><li>  <a href="std_xml.html" title="std.xml"><span class="d_inlinecode donthyphenate notranslate">xml</span></a></li><li>  <a href="std_zip.html" title="std.zip"><span class="d_inlinecode donthyphenate notranslate">zip</span></a></li><li>  <a href="std_zlib.html" title="std.zlib"><span class="d_inlinecode donthyphenate notranslate">zlib</span></a>
</li></ul>
</li>

<li class='expand-container'><a class='expand-toggle' href='#'><span><em class="tt">etc</em></span></a>
<ul><li>  <h7><span class="d_inlinecode donthyphenate notranslate">c</span></h7><ul><li>    <a href="etc_c_curl.html" title="etc.c.curl"><span class="d_inlinecode donthyphenate notranslate">curl</span></a></li><li>    <h7><span class="d_inlinecode donthyphenate notranslate">odbc</span></h7><ul><li>      <a href="etc_c_odbc_sql.html" title="etc.c.odbc.sql"><span class="d_inlinecode donthyphenate notranslate">sql</span></a></li><li>      <a href="etc_c_odbc_sqlext.html" title="etc.c.odbc.sqlext"><span class="d_inlinecode donthyphenate notranslate">sqlext</span></a></li><li>      <a href="etc_c_odbc_sqltypes.html" title="etc.c.odbc.sqltypes"><span class="d_inlinecode donthyphenate notranslate">sqltypes</span></a></li><li>      <a href="etc_c_odbc_sqlucode.html" title="etc.c.odbc.sqlucode"><span class="d_inlinecode donthyphenate notranslate">sqlucode</span></a>
    </li></ul></li><li>    <a href="etc_c_sqlite3.html" title="etc.c.sqlite3"><span class="d_inlinecode donthyphenate notranslate">sqlite3</span></a></li><li>    <a href="etc_c_zlib.html" title="etc.c.zlib"><span class="d_inlinecode donthyphenate notranslate">zlib</span></a>
  </li></ul>
</li></ul>
</li>

<li class='expand-container'><a class='expand-toggle' href='#'><span><em class="tt">core</em></span></a>
<ul><li>  <a href="core_atomic.html" title="core.atomic"><span class="d_inlinecode donthyphenate notranslate">atomic</span></a></li><li>  <a href="core_attribute.html" title="core.attribute"><span class="d_inlinecode donthyphenate notranslate">attribute</span></a></li><li>  <a href="core_bitop.html" title="core.bitop"><span class="d_inlinecode donthyphenate notranslate">bitop</span></a></li><li>  <a href="core_checkedint.html" title="core.checkedint"><span class="d_inlinecode donthyphenate notranslate">checkedint</span></a></li><li>  <a href="core_cpuid.html" title="core.cpuid"><span class="d_inlinecode donthyphenate notranslate">cpuid</span></a></li><li>  <a href="core_demangle.html" title="core.demangle"><span class="d_inlinecode donthyphenate notranslate">demangle</span></a></li><li>  <a href="core_exception.html" title="core.exception"><span class="d_inlinecode donthyphenate notranslate">exception</span></a></li><li>  <a href="core_math.html" title="core.math"><span class="d_inlinecode donthyphenate notranslate">math</span></a></li><li>  <a href="core_memory.html" title="core.memory"><span class="d_inlinecode donthyphenate notranslate">memory</span></a></li><li>  <a href="core_runtime.html" title="core.runtime"><span class="d_inlinecode donthyphenate notranslate">runtime</span></a></li><li>  <a href="core_simd.html" title="core.simd"><span class="d_inlinecode donthyphenate notranslate">simd</span></a></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">stdc</span></h7><ul><li>    <a href="core_stdc_complex.html" title="core.stdc.complex"><span class="d_inlinecode donthyphenate notranslate">complex</span></a></li><li>    <a href="core_stdc_ctype.html" title="core.stdc.ctype"><span class="d_inlinecode donthyphenate notranslate">ctype</span></a></li><li>    <a href="core_stdc_errno.html" title="core.stdc.errno"><span class="d_inlinecode donthyphenate notranslate">errno</span></a></li><li>    <a href="core_stdc_fenv.html" title="core.stdc.fenv"><span class="d_inlinecode donthyphenate notranslate">fenv</span></a></li><li>    <a href="core_stdc_float_.html" title="core.stdc.float_"><span class="d_inlinecode donthyphenate notranslate">float_</span></a></li><li>    <a href="core_stdc_inttypes.html" title="core.stdc.inttypes"><span class="d_inlinecode donthyphenate notranslate">inttypes</span></a></li><li>    <a href="core_stdc_limits.html" title="core.stdc.limits"><span class="d_inlinecode donthyphenate notranslate">limits</span></a></li><li>    <a href="core_stdc_locale.html" title="core.stdc.locale"><span class="d_inlinecode donthyphenate notranslate">locale</span></a></li><li>    <a href="core_stdc_math.html" title="core.stdc.math"><span class="d_inlinecode donthyphenate notranslate">math</span></a></li><li>    <a href="core_stdc_signal.html" title="core.stdc.signal"><span class="d_inlinecode donthyphenate notranslate">signal</span></a></li><li>    <a href="core_stdc_stdarg.html" title="core.stdc.stdarg"><span class="d_inlinecode donthyphenate notranslate">stdarg</span></a></li><li>    <a href="core_stdc_stddef.html" title="core.stdc.stddef"><span class="d_inlinecode donthyphenate notranslate">stddef</span></a></li><li>    <a href="core_stdc_stdint.html" title="core.stdc.stdint"><span class="d_inlinecode donthyphenate notranslate">stdint</span></a></li><li>    <a href="core_stdc_stdio.html" title="core.stdc.stdio"><span class="d_inlinecode donthyphenate notranslate">stdio</span></a></li><li>    <a href="core_stdc_stdlib.html" title="core.stdc.stdlib"><span class="d_inlinecode donthyphenate notranslate">stdlib</span></a></li><li>    <a href="core_stdc_string.html" title="core.stdc.string"><span class="d_inlinecode donthyphenate notranslate">string</span></a></li><li>    <a href="core_stdc_tgmath.html" title="core.stdc.tgmath"><span class="d_inlinecode donthyphenate notranslate">tgmath</span></a></li><li>    <a href="core_stdc_time.html" title="core.stdc.time"><span class="d_inlinecode donthyphenate notranslate">time</span></a></li><li>    <a href="core_stdc_wchar_.html" title="core.stdc.wchar_"><span class="d_inlinecode donthyphenate notranslate">wchar_</span></a></li><li>    <a href="core_stdc_wctype.html" title="core.stdc.wctype"><span class="d_inlinecode donthyphenate notranslate">wctype</span></a>
  </li></ul></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">stdcpp</span></h7><ul><li>    <a href="core_stdcpp_exception.html" title="core.stdcpp.exception"><span class="d_inlinecode donthyphenate notranslate">exception</span></a></li><li>    <a href="core_stdcpp_typeinfo.html" title="core.stdcpp.typeinfo"><span class="d_inlinecode donthyphenate notranslate">typeinfo</span></a>
  </li></ul></li><li>  <h7><span class="d_inlinecode donthyphenate notranslate">sync</span></h7><ul><li>    <a href="core_sync_barrier.html" title="core.sync.barrier"><span class="d_inlinecode donthyphenate notranslate">barrier</span></a></li><li>    <a href="core_sync_condition.html" title="core.sync.condition"><span class="d_inlinecode donthyphenate notranslate">condition</span></a></li><li>    <a href="core_sync_config.html" title="core.sync.config"><span class="d_inlinecode donthyphenate notranslate">config</span></a></li><li>    <a href="core_sync_exception.html" title="core.sync.exception"><span class="d_inlinecode donthyphenate notranslate">exception</span></a></li><li>    <a href="core_sync_mutex.html" title="core.sync.mutex"><span class="d_inlinecode donthyphenate notranslate">mutex</span></a></li><li>    <a href="core_sync_rwmutex.html" title="core.sync.rwmutex"><span class="d_inlinecode donthyphenate notranslate">rwmutex</span></a></li><li>    <a href="core_sync_semaphore.html" title="core.sync.semaphore"><span class="d_inlinecode donthyphenate notranslate">semaphore</span></a>
  </li></ul></li><li>  <a href="core_thread.html" title="core.thread"><span class="d_inlinecode donthyphenate notranslate">thread</span></a></li><li>  <a href="core_time.html" title="core.time"><span class="d_inlinecode donthyphenate notranslate">time</span></a></li><li>  <a href="core_vararg.html" title="core.vararg"><span class="d_inlinecode donthyphenate notranslate">vararg</span></a>
</li></ul>
</li></ul>
</div>
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/phobos/&amp;bug_severity=enhancement&amp;component=phobos&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5Bstd.experimental.allocator%5D&amp;version=D2">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/phobos/edit/master/std/experimental/allocator/package.d">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator</span></h1>
        <div class="quickindex" id="quickindex"></div>
        <div class="summary">High-level interface for allocators. Implements bundled allocation/creation
and destruction/deallocation of data including <span class="d_inlinecode donthyphenate notranslate">struct</span>s and <span class="d_inlinecode donthyphenate notranslate">class</span>es,
and also array primitives related to allocation. This module is the entry point
for both making use of allocators and for their documentation.
</div>
<div class="val"><p class="keyval Section"><span class="key keySection">Synopsis:</span>
<pre class="d_code notranslate"><span class="d_comment">// Allocate an int, initialize it with 42
</span><span class="d_keyword">int</span>* p = theAllocator.make!<span class="d_keyword">int</span>(42);
<span class="d_keyword">assert</span>(*p == 42);
<span class="d_comment">// Destroy and deallocate it
</span>theAllocator.dispose(p);

<span class="d_comment">// Allocate using the global process allocator
</span>p = processAllocator.make!<span class="d_keyword">int</span>(100);
<span class="d_keyword">assert</span>(*p == 100);
<span class="d_comment">// Destroy and deallocate
</span>processAllocator.dispose(p);

<span class="d_comment">// Create an array of 50 doubles initialized to -1.0
</span><span class="d_keyword">double</span>[] arr = theAllocator.makeArray!<span class="d_keyword">double</span>(50, -1.0);
<span class="d_comment">// Append two zeros to it
</span>theAllocator.expandArray(arr, 2, 0.0);
<span class="d_comment">// On second thought, take that back
</span>theAllocator.shrinkArray(arr, 2);
<span class="d_comment">// Destroy and deallocate
</span>theAllocator.dispose(arr);
</pre>
<div class="blankline"></div>


<h2>Layered Structure</h2>
<div class="blankline"></div>


D's allocators have a layered structure in both implementation and documentation:
<div class="blankline"></div>


<ol><li>A high-level, dynamically-typed layer (described further down in this
module). It consists of an interface called <a href="#IAllocator"><span class="d_inlinecode donthyphenate notranslate">IAllocator</span></a>, which concrete
allocators need to implement. The interface primitives themselves are oblivious
to the type of the objects being allocated; they only deal in <span class="d_inlinecode donthyphenate notranslate">void[]</span>, by
necessity of the interface being dynamic (as opposed to type-parameterized).
Each thread has a current <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> it uses by default, which is a thread-local
variable <a href="#theAllocator"><span class="d_inlinecode donthyphenate notranslate">theAllocator</span></a> of type <a href="#IAllocator"><span class="d_inlinecode donthyphenate notranslate">IAllocator</span></a>. The process has a
global allocator called <a href="#processAllocator"><span class="d_inlinecode donthyphenate notranslate">processAllocator</span></a>, also of type <a href="#IAllocator"><span class="d_inlinecode donthyphenate notranslate">IAllocator</span></a>. When a new thread is created, <a href="#processAllocator"><span class="d_inlinecode donthyphenate notranslate">processAllocator</span></a> is copied
into <a href="#theAllocator"><span class="d_inlinecode donthyphenate notranslate">theAllocator</span></a>. An application can change the objects to which these
references point. By default, at application startup, <a href="#processAllocator"><span class="d_inlinecode donthyphenate notranslate">processAllocator</span></a>
refers to an object that uses D's garbage collected heap. This layer also
include high-level functions such as <a href="#make"><span class="d_inlinecode donthyphenate notranslate">make</span></a> and <a href="#dispose"><span class="d_inlinecode donthyphenate notranslate">dispose</span></a> that
comfortably allocate/create and respectively destroy/deallocate objects. This
layer is all needed for most casual uses of allocation primitives.</li>
<div class="blankline"></div>


<li>A mid-level, statically-typed layer for assembling several allocators into
one. It uses properties of the type of the objects being created to route
allocation requests to possibly specialized allocators. This layer is relatively
thin and implemented and documented in the <a href="std_experimental_allocator_typed.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.typed</span></a> module. It allows an interested user to e.g.
use different allocators for arrays versus fixed-sized objects, to the end of
better overall performance.</li>
<div class="blankline"></div>


<li>A low-level collection of highly generic <i>heap building blocks</i><nobr>&#x200A;&mdash;&#x200A;</nobr>
Lego-like pieces that can be used to assemble application-specific allocators.
The real allocation smarts are occurring at this level. This layer is of
interest to advanced applications that want to configure their own allocators.
A good illustration of typical uses of these building blocks is module <a href="std_experimental_allocator_showcase.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.showcase</span></a> which defines a collection of frequently-
used preassembled <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> objects. The implementation and documentation entry
point is <a href="std_experimental_allocator_building_blocks.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.building_blocks</span></a>. By design, the
primitives of the static interface have the same signatures as the <a href="#IAllocator"><span class="d_inlinecode donthyphenate notranslate">IAllocator</span></a> primitives but are for the most part optional and driven by static
introspection. The parameterized class <a href="#CAllocatorImpl"><span class="d_inlinecode donthyphenate notranslate">CAllocatorImpl</span></a> offers an
immediate and useful means to package a static low-level allocator into an
implementation of <a href="#IAllocator"><span class="d_inlinecode donthyphenate notranslate">IAllocator</span></a>.</li>
<div class="blankline"></div>


<li>Core allocator objects that interface with D's garbage collected heap
(<a href="std_experimental_allocator_gc_allocator.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.gc_allocator</span></a>), the C <span class="d_inlinecode donthyphenate notranslate">malloc</span> family
(<a href="std_experimental_allocator_mallocator.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.mallocator</span></a>), and the OS (<a href="std_experimental_allocator_mmap_allocator.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.mmap_allocator</span></a>). Most custom allocators would
ultimately obtain memory from one of these core allocators.</li>
</ol>
<div class="blankline"></div>


<h2>Idiomatic Use of <span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator</span></h2>
<div class="blankline"></div>


As of this time, <span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator</span> is not integrated with D's
built-in operators that allocate memory, such as <span class="d_inlinecode donthyphenate notranslate">new</span>, array literals, or
array concatenation operators. That means <span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator</span> is
opt-in<nobr>&#x200A;&mdash;&#x200A;</nobr>applications need to make explicit use of it.
<div class="blankline"></div>


For casual creation and disposal of dynamically-allocated objects, use <a href="#make"><span class="d_inlinecode donthyphenate notranslate">make</span></a>, <a href="#dispose"><span class="d_inlinecode donthyphenate notranslate">dispose</span></a>, and the array-specific functions <a href="#makeArray"><span class="d_inlinecode donthyphenate notranslate">makeArray</span></a>,
<a href="#expandArray"><span class="d_inlinecode donthyphenate notranslate">expandArray</span></a>, and <a href="#shrinkArray"><span class="d_inlinecode donthyphenate notranslate">shrinkArray</span></a>. These use by default D's garbage
collected heap, but open the application to better configuration options. These
primitives work either with <span class="d_inlinecode donthyphenate notranslate">theAllocator</span> but also with any <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> obtained
by combining heap building blocks. For example:
<div class="blankline"></div>


<pre class="d_code notranslate"><span class="d_keyword">void</span> fun(size_t n)
{
    <span class="d_comment">// Use the current allocator
</span>    <span class="d_keyword">int</span>[] a1 = theAllocator.makeArray!<span class="d_keyword">int</span>(n);
    <span class="d_keyword">scope</span>(exit) theAllocator.dispose(a1);
    ...
}
</pre>
<div class="blankline"></div>


To experiment with alternative allocators, set <a href="#theAllocator"><span class="d_inlinecode donthyphenate notranslate">theAllocator</span></a> for the
current thread. For example, consider an application that allocates many 8-byte
objects. These are not well supported by the default allocator, so a
<a href="std_experimental_allocator_building_blocks_free_list.html">free list allocator</a> would be recommended.
To install one in <span class="d_inlinecode donthyphenate notranslate">main</span>, the application would use:
<div class="blankline"></div>


<pre class="d_code notranslate"><span class="d_keyword">void</span> main()
{
    <span class="d_keyword">import</span> std.experimental.<span class="d_psymbol">allocator</span>.building_blocks.free_list
        : FreeList;
    theAllocator = allocatorObject(FreeList!8());
    ...
}
</pre>
<div class="blankline"></div>


<h3>Saving the <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> Reference For Later Use</h3>
<div class="blankline"></div>


As with any global resource, setting <span class="d_inlinecode donthyphenate notranslate">theAllocator</span> and <span class="d_inlinecode donthyphenate notranslate">processAllocator</span>
should not be done often and casually. In particular, allocating memory with
one <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> and deallocating with another causes undefined behavior.
Typically, these variables are set during application initialization phase and
last through the application.
<div class="blankline"></div>


To avoid this, long-lived objects that need to perform allocations,
reallocations, and deallocations relatively often may want to store a reference
to the allocator object they use throughout their lifetime. Then, instead of
using <span class="d_inlinecode donthyphenate notranslate">theAllocator</span> for internal allocation-related tasks, they'd use the
internally held reference. For example, consider a user-defined hash table:
<div class="blankline"></div>


<pre class="d_code notranslate"><span class="d_keyword">struct</span> HashTable
{
    <span class="d_keyword">private</span> IAllocator _allocator;
    <span class="d_keyword">this</span>(size_t buckets, IAllocator <span class="d_psymbol">allocator</span> = theAllocator) {
        <span class="d_keyword">this</span>._allocator = <span class="d_psymbol">allocator</span>;
        ...
    }
    <span class="d_comment">// Getter and setter
</span>    IAllocator <span class="d_psymbol">allocator</span>() { <span class="d_keyword">return</span> _allocator; }
    <span class="d_keyword">void</span> <span class="d_psymbol">allocator</span>(IAllocator a) { <span class="d_keyword">assert</span>(empty); _allocator = a; }
}
</pre>
<div class="blankline"></div>


Following initialization, the <span class="d_inlinecode donthyphenate notranslate">HashTable</span> object would consistently use its
<span class="d_inlinecode donthyphenate notranslate">allocator</span> object for acquiring memory. Furthermore, setting
<span class="d_inlinecode donthyphenate notranslate">HashTable.allocator</span> to point to a different allocator should be legal but
only if the object is empty; otherwise, the object wouldn't be able to
deallocate its existing state.
<div class="blankline"></div>


<h3>Using Allocators without <span class="d_inlinecode donthyphenate notranslate">IAllocator</span></h3>
<div class="blankline"></div>


Allocators assembled from the heap building blocks don't need to go through
<span class="d_inlinecode donthyphenate notranslate">IAllocator</span> to be usable. They have the same primitives as <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> and
they work with <a href="#make"><span class="d_inlinecode donthyphenate notranslate">make</span></a>, <a href="#makeArray"><span class="d_inlinecode donthyphenate notranslate">makeArray</span></a>, <a href="#dispose"><span class="d_inlinecode donthyphenate notranslate">dispose</span></a> etc. So it
suffice to create <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> objects wherever fit and use them appropriately:
<div class="blankline"></div>


<pre class="d_code notranslate"><span class="d_keyword">void</span> fun(size_t n)
{
    <span class="d_comment">// Use a stack-installed allocator for up to 64KB
</span>    StackFront!65536 myAllocator;
    <span class="d_keyword">int</span>[] a2 = myAllocator.makeArray!<span class="d_keyword">int</span>(n);
    <span class="d_keyword">scope</span>(exit) myAllocator.dispose(a2);
    ...
}
</pre>
<div class="blankline"></div>


In this case, <span class="d_inlinecode donthyphenate notranslate">myAllocator</span> does not obey the <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> interface, but
implements its primitives so it can work with <span class="d_inlinecode donthyphenate notranslate">makeArray</span> by means of duck
typing.
<div class="blankline"></div>


One important thing to note about this setup is that statically-typed assembled
allocators are almost always faster than allocators that go through
<span class="d_inlinecode donthyphenate notranslate">IAllocator</span>. An important rule of thumb is: "assemble <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> first, adapt
to <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> after". A good <span class="def-anchor" id="allocator"></span><span class="ddoc_psymbol">allocator</span> implements intricate logic by means of
template assembly, and gets wrapped with <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> (usually by means of
<a href="#allocatorObject"><span class="d_inlinecode donthyphenate notranslate">allocatorObject</span></a>) only once, at client level.

</p></div>
<div class="keyval License"><span class="key keyLicense">License:</span> <div class="val valLicense"><a href="http://boost.org/LICENSE_1_0.txt">Boost License 1.0</a>.

</div></div>
<div class="keyval Authors"><span class="key keyAuthors">Authors:</span> <div class="val valAuthors"><a href="http://erdani.com">Andrei Alexandrescu</a>

</div></div>
<div class="val"><p class="keyval Section"><span class="key keySection">Source:</span>
<span class="phobos_src"><a class="https" href="https://github.com/dlang/phobos/blob/master/std/experimental/allocator">std/experimental/allocator</a></span></p></div>

<dl><dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator"></span><div class="quickindex" id="quickindex.IAllocator"></div>interface <span class="def-anchor" id="IAllocator"></span><span class="ddoc_psymbol">IAllocator</span>;
<br></div></dt>
<dd><div class="summary">Dynamic allocator interface. Code that defines allocators ultimately implements
this interface. This should be used wherever a uniform type is required for
encapsulating various allocator implementations.
</div>
<div class="description">Composition of allocators is not recommended at this level due to
inflexibility of dynamic interfaces and inefficiencies caused by cascaded
multiple calls. Instead, compose allocators using the static interface defined
in <a href="std_experimental_allocator_building_blocks.html"><span class="d_inlinecode donthyphenate notranslate">std.experimental.allocator.building_blocks</span></a>, then adapt the composed
allocator to <span class="d_inlinecode donthyphenate notranslate"><span class="def-anchor" id="IAllocator"></span><span class="ddoc_psymbol">IAllocator</span></span> (possibly by using <a href="#CAllocatorImpl"><span class="d_inlinecode donthyphenate notranslate">CAllocatorImpl</span></a> below).
<div class="blankline"></div>


Methods returning <span class="d_inlinecode donthyphenate notranslate">Ternary</span> return <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span> upon success,
<span class="d_inlinecode donthyphenate notranslate">Ternary.no</span> upon failure, and <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span> if the primitive is not
implemented by the allocator instance.</div>

<dl><dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.alignment"></span><div class="quickindex" id="quickindex.IAllocator.alignment"></div>abstract @property uint <span class="def-anchor" id="alignment"></span><span class="ddoc_psymbol">alignment</span>();
<br></div></dt>
<dd><div class="summary">Returns the <span class="def-anchor" id="alignment"></span><span class="ddoc_psymbol">alignment</span> offered.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.goodAllocSize"></span><div class="quickindex" id="quickindex.IAllocator.goodAllocSize"></div>abstract size_t <span class="def-anchor" id="goodAllocSize"></span><span class="ddoc_psymbol">goodAllocSize</span>(size_t <i>s</i>);
<br></div></dt>
<dd><div class="summary">Returns the good allocation size that guarantees zero internal
    fragmentation.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.allocate"></span><div class="quickindex" id="quickindex.IAllocator.allocate"></div>abstract void[] <span class="def-anchor" id="allocate"></span><span class="ddoc_psymbol">allocate</span>(size_t, TypeInfo <i>ti</i> = null);
<br></div></dt>
<dd><div class="summary">Allocates <span class="d_inlinecode donthyphenate notranslate">n</span> bytes of memory.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.alignedAllocate"></span><div class="quickindex" id="quickindex.IAllocator.alignedAllocate"></div>abstract void[] <span class="def-anchor" id="alignedAllocate"></span><span class="ddoc_psymbol">alignedAllocate</span>(size_t <i>n</i>, uint <i>a</i>);
<br></div></dt>
<dd><div class="summary">Allocates <span class="d_inlinecode donthyphenate notranslate"><i>n</i></span> bytes of memory with specified alignment <span class="d_inlinecode donthyphenate notranslate"><i>a</i></span>. Implementations
    that do not support this primitive should always return <span class="d_inlinecode donthyphenate notranslate">null</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.allocateAll"></span><div class="quickindex" id="quickindex.IAllocator.allocateAll"></div>abstract void[] <span class="def-anchor" id="allocateAll"></span><span class="ddoc_psymbol">allocateAll</span>();
<br></div></dt>
<dd><div class="summary">Allocates and returns all memory available to this allocator.
    Implementations that do not support this primitive should always return
    <span class="d_inlinecode donthyphenate notranslate">null</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.expand"></span><div class="quickindex" id="quickindex.IAllocator.expand"></div>abstract bool <span class="def-anchor" id="expand"></span><span class="ddoc_psymbol">expand</span>(ref void[], size_t);
<br></div></dt>
<dd><div class="summary">Expands a memory block in place and returns <span class="d_inlinecode donthyphenate notranslate">true</span> if successful.
    Implementations that don't support this primitive should always return
    <span class="d_inlinecode donthyphenate notranslate">false</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.reallocate"></span><div class="quickindex" id="quickindex.IAllocator.reallocate"></div>abstract bool <span class="def-anchor" id="reallocate"></span><span class="ddoc_psymbol">reallocate</span>(ref void[], size_t);
<br></div></dt>
<dd><div class="summary">Reallocates a memory block.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.alignedReallocate"></span><div class="quickindex" id="quickindex.IAllocator.alignedReallocate"></div>abstract bool <span class="def-anchor" id="alignedReallocate"></span><span class="ddoc_psymbol">alignedReallocate</span>(ref void[] <i>b</i>, size_t <i>size</i>, uint <i>alignment</i>);
<br></div></dt>
<dd><div class="summary">Reallocates a memory block with specified <i>alignment</i>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.owns"></span><div class="quickindex" id="quickindex.IAllocator.owns"></div>abstract Ternary <span class="def-anchor" id="owns"></span><span class="ddoc_psymbol">owns</span>(void[] <i>b</i>);
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span> if the allocator <span class="def-anchor" id="owns"></span><span class="ddoc_psymbol">owns</span> <span class="d_inlinecode donthyphenate notranslate"><i>b</i></span>, <span class="d_inlinecode donthyphenate notranslate">Ternary.no</span> if
    the allocator doesn't own <span class="d_inlinecode donthyphenate notranslate"><i>b</i></span>, and <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span> if ownership
    cannot be determined. Implementations that don't support this primitive
    should always return <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.resolveInternalPointer"></span><div class="quickindex" id="quickindex.IAllocator.resolveInternalPointer"></div>abstract Ternary <span class="def-anchor" id="resolveInternalPointer"></span><span class="ddoc_psymbol">resolveInternalPointer</span>(void* <i>p</i>, ref void[] <i>result</i>);
<br></div></dt>
<dd><div class="summary">Resolves an internal pointer to the full block allocated. Implementations
    that don't support this primitive should always return <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.deallocate"></span><div class="quickindex" id="quickindex.IAllocator.deallocate"></div>abstract bool <span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span>(void[] <i>b</i>);
<br></div></dt>
<dd><div class="summary">Deallocates a memory block. Implementations that don't support this
    primitive should always return <span class="d_inlinecode donthyphenate notranslate">false</span>. A simple way to check that an
    allocator supports deallocation is to call <span class="d_inlinecode donthyphenate notranslate"><span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span>(<b>null</b>)</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.deallocateAll"></span><div class="quickindex" id="quickindex.IAllocator.deallocateAll"></div>abstract bool <span class="def-anchor" id="deallocateAll"></span><span class="ddoc_psymbol">deallocateAll</span>();
<br></div></dt>
<dd><div class="summary">Deallocates all memory. Implementations that don't support this primitive
    should always return <span class="d_inlinecode donthyphenate notranslate">false</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".IAllocator.empty"></span><div class="quickindex" id="quickindex.IAllocator.empty"></div>abstract Ternary <span class="def-anchor" id="empty"></span><span class="ddoc_psymbol">empty</span>();
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span> if no memory is currently allocated from this
    allocator, <span class="d_inlinecode donthyphenate notranslate">Ternary.no</span> if some allocations are currently active, or
    <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span> if not supported.</div>

</dd>
</dl>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".theAllocator"></span><div class="quickindex" id="quickindex.theAllocator"></div>nothrow @nogc @property @safe IAllocator <span class="def-anchor" id="theAllocator"></span><span class="ddoc_psymbol">theAllocator</span>();
<br><br>nothrow @nogc @property @safe void <span class="def-anchor" id="theAllocator"></span><span class="ddoc_psymbol">theAllocator</span>(IAllocator <i>a</i>);
<br></div></dt>
<dd><div class="summary">Gets/sets the allocator for the current thread. This is the default allocator
that should be used for allocating thread-local memory. For allocating memory
to be shared across threads, use <span class="d_inlinecode donthyphenate notranslate">processAllocator</span> (below). By default,
<span class="d_inlinecode donthyphenate notranslate"><span class="def-anchor" id="theAllocator"></span><span class="ddoc_psymbol">theAllocator</span></span> ultimately fetches memory from <span class="d_inlinecode donthyphenate notranslate">processAllocator</span>, which
in turn uses the garbage collected heap.</div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_comment">// Install a new allocator that is faster for 128-byte allocations.
</span><span class="d_keyword">import</span> std.experimental.allocator.building_blocks.free_list : FreeList;
<span class="d_keyword">import</span> std.experimental.allocator.gc_allocator : GCAllocator;
<span class="d_keyword">auto</span> oldAllocator = <span class="d_psymbol">theAllocator</span>;
<span class="d_keyword">scope</span>(exit) <span class="d_psymbol">theAllocator</span> = oldAllocator;
<span class="d_psymbol">theAllocator</span> = allocatorObject(FreeList!(GCAllocator, 128)());
<span class="d_comment">// Use the now changed allocator to allocate an array
</span><span class="d_keyword">const</span> <span class="d_keyword">ubyte</span>[] arr = <span class="d_psymbol">theAllocator</span>.makeArray!<span class="d_keyword">ubyte</span>(128);
<span class="d_keyword">assert</span>(arr.ptr);
<span class="d_comment">//...
</span></pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".processAllocator"></span><div class="quickindex" id="quickindex.processAllocator"></div>@property IAllocator <span class="def-anchor" id="processAllocator"></span><span class="ddoc_psymbol">processAllocator</span>();
<br><br>@property void <span class="def-anchor" id="processAllocator"></span><span class="ddoc_psymbol">processAllocator</span>(IAllocator <i>a</i>);
<br></div></dt>
<dd><div class="summary">Gets/sets the allocator for the current process. This allocator must be used
for allocating memory shared across threads. Objects created using this
allocator can be cast to <span class="d_inlinecode donthyphenate notranslate">shared</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".make"></span><div class="quickindex" id="quickindex.make"></div>auto <span class="def-anchor" id="make"></span><span class="ddoc_psymbol">make</span><span class="template_param_list" title="Template parameter list">(T, Allocator, A...)</span>(auto ref Allocator <i>alloc</i>, auto ref A <i>args</i>);
<br></div></dt>
<dd><div class="summary">Dynamically allocates (using <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>) and then creates in the memory
allocated an object of type <span class="d_inlinecode donthyphenate notranslate">T</span>, using <span class="d_inlinecode donthyphenate notranslate"><i>args</i></span> (if any) for its
initialization. Initialization occurs in the memory allocated and is otherwise
semantically the same as <span class="d_inlinecode donthyphenate notranslate">T(<i>args</i>)</span>.
(Note that using <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i>.<span class="def-anchor" id="make"></span><span class="ddoc_psymbol">make</span>!(T[])</span> creates a pointer to an (empty) array
of <span class="d_inlinecode donthyphenate notranslate">T</span>s, not an array. To use an allocator to allocate and initialize an
array, use <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i>.makeArray!T</span> described below.)
</div>
<div class="keyval Parameters"><span class="key keyParameters">Parameters:</span> <div class="val valParameters"><table class="params"><tr class="param"><td class="param_id">T</td>
<td class="param_desc">Type of the object being created.</td></tr>
<tr class="param"><td class="param_id">Allocator <i>alloc</i></td>
<td class="param_desc">The allocator used for getting the needed memory. It may be an object
implementing the static interface for allocators, or an <span class="d_inlinecode donthyphenate notranslate">IAllocator</span>
reference.</td></tr>
<tr class="param"><td class="param_id">A <i>args</i></td>
<td class="param_desc">Optional arguments used for initializing the created object. If not
present, the object is default constructed.</td></tr>
</table></div></div>
<div class="keyval Returns"><span class="key keyReturns">Returns:</span> <div class="val valReturns">If <span class="d_inlinecode donthyphenate notranslate">T</span> is a class type, returns a reference to the created <span class="d_inlinecode donthyphenate notranslate">T</span>
object. Otherwise, returns a <span class="d_inlinecode donthyphenate notranslate">T*</span> pointing to the created object. In all
cases, returns <span class="d_inlinecode donthyphenate notranslate"><b>null</b></span> if allocation failed.

</div></div>
<div class="keyval Throws"><span class="key keyThrows">Throws:</span> <div class="val valThrows">If <span class="d_inlinecode donthyphenate notranslate">T</span>'s constructor throws, deallocates the allocated memory and
propagates the exception.</div></div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_comment">// Dynamically allocate one integer
</span><span class="d_keyword">const</span> <span class="d_keyword">int</span>* p1 = theAllocator.<span class="d_psymbol">make</span>!<span class="d_keyword">int</span>;
<span class="d_comment">// It's implicitly initialized with its .init value
</span><span class="d_keyword">assert</span>(*p1 == 0);
<span class="d_comment">// Dynamically allocate one double, initialize to 42.5
</span><span class="d_keyword">const</span> <span class="d_keyword">double</span>* p2 = theAllocator.<span class="d_psymbol">make</span>!<span class="d_keyword">double</span>(42.5);
<span class="d_keyword">assert</span>(*p2 == 42.5);

<span class="d_comment">// Dynamically allocate a struct
</span><span class="d_keyword">static</span> <span class="d_keyword">struct</span> Point
{
    <span class="d_keyword">int</span> x, y, z;
}
<span class="d_comment">// Use the generated constructor taking field values in order
</span><span class="d_keyword">const</span> Point* p = theAllocator.<span class="d_psymbol">make</span>!Point(1, 2);
<span class="d_keyword">assert</span>(p.x == 1 &amp;&amp; p.y == 2 &amp;&amp; p.z == 0);

<span class="d_comment">// Dynamically allocate a class object
</span><span class="d_keyword">static</span> <span class="d_keyword">class</span> Customer
{
    <span class="d_keyword">uint</span> id = <span class="d_keyword">uint</span>.max;
    <span class="d_keyword">this</span>() {}
    <span class="d_keyword">this</span>(<span class="d_keyword">uint</span> id) { <span class="d_keyword">this</span>.id = id; }
    <span class="d_comment">// ...
</span>}
Customer cust = theAllocator.<span class="d_psymbol">make</span>!Customer;
<span class="d_keyword">assert</span>(cust.id == <span class="d_keyword">uint</span>.max); <span class="d_comment">// default initialized
</span>cust = theAllocator.<span class="d_psymbol">make</span>!Customer(42);
<span class="d_keyword">assert</span>(cust.id == 42);

<span class="d_comment">// explicit passing of outer pointer
</span><span class="d_keyword">static</span> <span class="d_keyword">class</span> Outer
{
    <span class="d_keyword">int</span> x = 3;
    <span class="d_keyword">class</span> Inner
    {
        <span class="d_keyword">auto</span> getX() { <span class="d_keyword">return</span> x; }
    }
}
<span class="d_keyword">auto</span> outer = theAllocator.<span class="d_psymbol">make</span>!Outer();
<span class="d_keyword">auto</span> inner = theAllocator.<span class="d_psymbol">make</span>!(Outer.Inner)(outer);
<span class="d_keyword">assert</span>(outer.x == inner.getX);
</pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".makeArray"></span><div class="quickindex" id="quickindex.makeArray"></div>T[] <span class="def-anchor" id="makeArray"></span><span class="ddoc_psymbol">makeArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator)</span>(auto ref Allocator <i>alloc</i>, size_t <i>length</i>);
<br><br>T[] <span class="def-anchor" id="makeArray"></span><span class="ddoc_psymbol">makeArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator)</span>(auto ref Allocator <i>alloc</i>, size_t <i>length</i>, auto ref T <i>init</i>);
<br><br>Unqual!(ElementEncodingType!R)[] <span class="def-anchor" id="makeArray"></span><span class="ddoc_psymbol">makeArray</span><span class="template_param_list" title="Template parameter list">(Allocator, R)</span>(auto ref Allocator <i>alloc</i>, R <i>range</i>)<br><span class="constraint">if (isInputRange!R &amp;&amp; !isInfinite!R)</span>;
<br><br>T[] <span class="def-anchor" id="makeArray"></span><span class="ddoc_psymbol">makeArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator, R)</span>(auto ref Allocator <i>alloc</i>, R <i>range</i>)<br><span class="constraint">if (isInputRange!R &amp;&amp; !isInfinite!R)</span>;
<br></div></dt>
<dd><div class="summary">Create an array of <span class="d_inlinecode donthyphenate notranslate">T</span> with <span class="d_inlinecode donthyphenate notranslate"><i>length</i></span> elements using <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>. The array is either default-initialized, filled with copies of <span class="d_inlinecode donthyphenate notranslate"><i>init</i></span>, or initialized with values fetched from <span class="d_inlinecode donthyphenate notranslate"><i>range</i></span>.
</div>
<div class="keyval Parameters"><span class="key keyParameters">Parameters:</span> <div class="val valParameters"><table class="params"><tr class="param"><td class="param_id">T</td>
<td class="param_desc">element type of the array being created</td></tr>
<tr class="param"><td class="param_id">Allocator <i>alloc</i></td>
<td class="param_desc">the allocator used for getting memory</td></tr>
<tr class="param"><td class="param_id">size_t <i>length</i></td>
<td class="param_desc"><i>length</i> of the newly created array</td></tr>
<tr class="param"><td class="param_id">T <i>init</i></td>
<td class="param_desc">element used for filling the array</td></tr>
<tr class="param"><td class="param_id">R <i>range</i></td>
<td class="param_desc"><i>range</i> used for initializing the array elements</td></tr>
</table></div></div>
<div class="keyval Returns"><span class="key keyReturns">Returns:</span> <div class="val valReturns">The newly-created array, or <span class="d_inlinecode donthyphenate notranslate"><b>null</b></span> if either <span class="d_inlinecode donthyphenate notranslate"><i>length</i></span> was <span class="d_inlinecode donthyphenate notranslate">0</span> or
allocation failed.

</div></div>
<div class="keyval Throws"><span class="key keyThrows">Throws:</span> <div class="val valThrows">The first two overloads throw only if <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>'s primitives do. The
overloads that involve copy initialization deallocate memory and propagate the
exception if the copy operation throws.</div></div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_keyword">import</span> std.algorithm.comparison : equal;
<span class="d_keyword">static</span> <span class="d_keyword">void</span> test(T)()
{
    T[] a = theAllocator.<span class="d_psymbol">makeArray</span>!T(2);
    <span class="d_keyword">assert</span>(a.equal([0, 0]));
    a = theAllocator.<span class="d_psymbol">makeArray</span>!T(3, 42);
    <span class="d_keyword">assert</span>(a.equal([42, 42, 42]));
    <span class="d_keyword">import</span> std.<span class="d_param">range</span> : only;
    a = theAllocator.<span class="d_psymbol">makeArray</span>!T(only(42, 43, 44));
    <span class="d_keyword">assert</span>(a.equal([42, 43, 44]));
}
test!<span class="d_keyword">int</span>();
test!(<span class="d_keyword">shared</span> <span class="d_keyword">int</span>)();
test!(<span class="d_keyword">const</span> <span class="d_keyword">int</span>)();
test!(<span class="d_keyword">immutable</span> <span class="d_keyword">int</span>)();
</pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".expandArray"></span><div class="quickindex" id="quickindex.expandArray"></div>bool <span class="def-anchor" id="expandArray"></span><span class="ddoc_psymbol">expandArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator)</span>(auto ref Allocator <i>alloc</i>, ref T[] <i>array</i>, size_t <i>delta</i>);
<br><br>bool <span class="def-anchor" id="expandArray"></span><span class="ddoc_psymbol">expandArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator)</span>(auto ref Allocator <i>alloc</i>, ref T[] <i>array</i>, size_t <i>delta</i>, auto ref T <i>init</i>);
<br><br>bool <span class="def-anchor" id="expandArray"></span><span class="ddoc_psymbol">expandArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator, R)</span>(auto ref Allocator <i>alloc</i>, ref T[] <i>array</i>, R <i>range</i>)<br><span class="constraint">if (isInputRange!R)</span>;
<br></div></dt>
<dd><div class="summary">Grows <span class="d_inlinecode donthyphenate notranslate"><i>array</i></span> by appending <span class="d_inlinecode donthyphenate notranslate"><i>delta</i></span> more elements. The needed memory is
allocated using <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>. The extra elements added are either default-
initialized, filled with copies of <span class="d_inlinecode donthyphenate notranslate"><i>init</i></span>, or initialized with values
fetched from <span class="d_inlinecode donthyphenate notranslate"><i>range</i></span>.
</div>
<div class="keyval Parameters"><span class="key keyParameters">Parameters:</span> <div class="val valParameters"><table class="params"><tr class="param"><td class="param_id">T</td>
<td class="param_desc">element type of the <i>array</i> being created</td></tr>
<tr class="param"><td class="param_id">Allocator <i>alloc</i></td>
<td class="param_desc">the allocator used for getting memory</td></tr>
<tr class="param"><td class="param_id">T[] <i>array</i></td>
<td class="param_desc">a reference to the <i>array</i> being grown</td></tr>
<tr class="param"><td class="param_id">size_t <i>delta</i></td>
<td class="param_desc">number of elements to add (upon success the new length of <span class="d_inlinecode donthyphenate notranslate"><i>array</i></span> is
<span class="d_inlinecode donthyphenate notranslate"><i>array</i>.length + <i>delta</i></span>)</td></tr>
<tr class="param"><td class="param_id">T <i>init</i></td>
<td class="param_desc">element used for filling the <i>array</i></td></tr>
<tr class="param"><td class="param_id">R <i>range</i></td>
<td class="param_desc"><i>range</i> used for initializing the <i>array</i> elements</td></tr>
</table></div></div>
<div class="keyval Returns"><span class="key keyReturns">Returns:</span> <div class="val valReturns"><span class="d_inlinecode donthyphenate notranslate"><b>true</b></span> upon success, <span class="d_inlinecode donthyphenate notranslate"><b>false</b></span> if memory could not be allocated. In the
latter case <span class="d_inlinecode donthyphenate notranslate"><i>array</i></span> is left unaffected.

</div></div>
<div class="keyval Throws"><span class="key keyThrows">Throws:</span> <div class="val valThrows">The first two overloads throw only if <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>'s primitives do. The
overloads that involve copy initialization deallocate memory and propagate the
exception if the copy operation throws.</div></div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_keyword">auto</span> arr = theAllocator.makeArray!<span class="d_keyword">int</span>([1, 2, 3]);
<span class="d_keyword">assert</span>(theAllocator.<span class="d_psymbol">expandArray</span>(arr, 2));
<span class="d_keyword">assert</span>(arr == [1, 2, 3, 0, 0]);
<span class="d_keyword">import</span> std.<span class="d_param">range</span> : only;
<span class="d_keyword">assert</span>(theAllocator.<span class="d_psymbol">expandArray</span>(arr, only(4, 5)));
<span class="d_keyword">assert</span>(arr == [1, 2, 3, 0, 0, 4, 5]);
</pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".shrinkArray"></span><div class="quickindex" id="quickindex.shrinkArray"></div>bool <span class="def-anchor" id="shrinkArray"></span><span class="ddoc_psymbol">shrinkArray</span><span class="template_param_list" title="Template parameter list">(T, Allocator)</span>(auto ref Allocator <i>alloc</i>, ref T[] <i>array</i>, size_t <i>delta</i>);
<br></div></dt>
<dd><div class="summary">Shrinks an <i>array</i> by <span class="d_inlinecode donthyphenate notranslate"><i>delta</i></span> elements.
</div>
<div class="description">If <span class="d_inlinecode donthyphenate notranslate"><i>array</i>.length &lt; <i>delta</i></span>, does nothing and returns <span class="d_inlinecode donthyphenate notranslate">false</span>. Otherwise,
destroys the last <span class="d_inlinecode donthyphenate notranslate"><i>array</i>.length - <i>delta</i></span> elements in the <i>array</i> and then
reallocates the <i>array</i>'s buffer. If reallocation fails, fills the <i>array</i> with
default-initialized data.

</div>
<div class="keyval Parameters"><span class="key keyParameters">Parameters:</span> <div class="val valParameters"><table class="params"><tr class="param"><td class="param_id">T</td>
<td class="param_desc">element type of the <i>array</i> being created</td></tr>
<tr class="param"><td class="param_id">Allocator <i>alloc</i></td>
<td class="param_desc">the allocator used for getting memory</td></tr>
<tr class="param"><td class="param_id">T[] <i>array</i></td>
<td class="param_desc">a reference to the <i>array</i> being shrunk</td></tr>
<tr class="param"><td class="param_id">size_t <i>delta</i></td>
<td class="param_desc">number of elements to remove (upon success the new length of <span class="d_inlinecode donthyphenate notranslate"><i>array</i></span> is <span class="d_inlinecode donthyphenate notranslate"><i>array</i>.length - <i>delta</i></span>)</td></tr>
</table></div></div>
<div class="keyval Returns"><span class="key keyReturns">Returns:</span> <div class="val valReturns"><span class="d_inlinecode donthyphenate notranslate">true</span> upon success, <span class="d_inlinecode donthyphenate notranslate">false</span> if memory could not be reallocated. In the latter
case, the slice <span class="d_inlinecode donthyphenate notranslate"><i>array</i>[$ - <i>delta</i> .. $]</span> is left with default-initialized
elements.

</div></div>
<div class="keyval Throws"><span class="key keyThrows">Throws:</span> <div class="val valThrows">The first two overloads throw only if <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>'s primitives do. The
overloads that involve copy initialization deallocate memory and propagate the
exception if the copy operation throws.</div></div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_keyword">int</span>[] a = theAllocator.makeArray!<span class="d_keyword">int</span>(100, 42);
<span class="d_keyword">assert</span>(a.length == 100);
<span class="d_keyword">assert</span>(theAllocator.<span class="d_psymbol">shrinkArray</span>(a, 98));
<span class="d_keyword">assert</span>(a.length == 2);
<span class="d_keyword">assert</span>(a == [42, 42]);
</pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".dispose"></span><div class="quickindex" id="quickindex.dispose"></div>void <span class="def-anchor" id="dispose"></span><span class="ddoc_psymbol">dispose</span><span class="template_param_list" title="Template parameter list">(A, T)</span>(auto ref A <i>alloc</i>, T* <i>p</i>);
<br><br>void <span class="def-anchor" id="dispose"></span><span class="ddoc_psymbol">dispose</span><span class="template_param_list" title="Template parameter list">(A, T)</span>(auto ref A <i>alloc</i>, T <i>p</i>)<br><span class="constraint">if (is(T == class) || is(T == interface))</span>;
<br><br>void <span class="def-anchor" id="dispose"></span><span class="ddoc_psymbol">dispose</span><span class="template_param_list" title="Template parameter list">(A, T)</span>(auto ref A <i>alloc</i>, T[] <i>array</i>);
<br></div></dt>
<dd><div class="summary">Destroys and then deallocates (using <span class="d_inlinecode donthyphenate notranslate"><i>alloc</i></span>) the object pointed to by a
pointer, the class object referred to by a <span class="d_inlinecode donthyphenate notranslate">class</span> or <span class="d_inlinecode donthyphenate notranslate">interface</span>
reference, or an entire <i>array</i>. It is assumed the respective entities had been
allocated with the same allocator.
</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".allocatorObject"></span><div class="quickindex" id="quickindex.allocatorObject"></div>CAllocatorImpl!A <span class="def-anchor" id="allocatorObject"></span><span class="ddoc_psymbol">allocatorObject</span><span class="template_param_list" title="Template parameter list">(A)</span>(auto ref A <i>a</i>)<br><span class="constraint">if (!isPointer!A)</span>;
<br><br>CAllocatorImpl!(A, Yes.indirect) <span class="def-anchor" id="allocatorObject"></span><span class="ddoc_psymbol">allocatorObject</span><span class="template_param_list" title="Template parameter list">(A)</span>(A* <i>pa</i>);
<br></div></dt>
<dd><div class="summary">Returns <i>a</i> dynamically-typed <span class="d_inlinecode donthyphenate notranslate">CAllocator</span> built around <i>a</i> given statically-
typed allocator <span class="d_inlinecode donthyphenate notranslate"><i>a</i></span> of type <span class="d_inlinecode donthyphenate notranslate">A</span>. Passing <i>a</i> pointer to the allocator
creates <i>a</i> dynamic allocator around the allocator pointed to by the pointer,
without attempting to copy or move it. Passing the allocator by value or
reference behaves as follows.
</div>
<div class="description"><ul><li>If <span class="d_inlinecode donthyphenate notranslate">A</span> has no state, the resulting object is allocated in static
shared storage.</li>
<li>If <span class="d_inlinecode donthyphenate notranslate">A</span> has state and is copyable, the result will store <i>a</i> copy of it
within. The result itself is allocated in its own statically-typed allocator.</li>
<li>If <span class="d_inlinecode donthyphenate notranslate">A</span> has state and is not copyable, the result will move the
passed-in argument into the result. The result itself is allocated in its own
statically-typed allocator.</li>
</ul></div>
<div class="keyval Examples"><span class="key keyExamples">Examples:</span> <div class="val valExamples"><pre class="d_code notranslate">
<span class="d_keyword">import</span> std.experimental.allocator.mallocator : Mallocator;
IAllocator <span class="d_param">a</span> = <span class="d_psymbol">allocatorObject</span>(Mallocator.instance);
<span class="d_keyword">auto</span> b = <span class="d_param">a</span>.allocate(100);
<span class="d_keyword">assert</span>(b.length == 100);
<span class="d_keyword">assert</span>(<span class="d_param">a</span>.deallocate(b));

<span class="d_comment">// The in-situ region must be used by pointer
</span><span class="d_keyword">import</span> std.experimental.allocator.building_blocks.region : InSituRegion;
<span class="d_keyword">auto</span> r = InSituRegion!1024();
<span class="d_param">a</span> = <span class="d_psymbol">allocatorObject</span>(&amp;r);
b = <span class="d_param">a</span>.allocate(200);
<span class="d_keyword">assert</span>(b.length == 200);
<span class="d_comment">// In-situ regions can deallocate the last allocation
</span><span class="d_keyword">assert</span>(<span class="d_param">a</span>.deallocate(b));
</pre>
</div></div>
</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl"></span><div class="quickindex" id="quickindex.CAllocatorImpl"></div>class <span class="def-anchor" id="CAllocatorImpl"></span><span class="ddoc_psymbol">CAllocatorImpl</span>(Allocator, Flag!"indirect" indirect = No.indirect): IAllocator;
<br></div></dt>
<dd><div class="summary">Implementation of <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> using <span class="d_inlinecode donthyphenate notranslate">Allocator</span>. This adapts a
statically-built allocator type to <span class="d_inlinecode donthyphenate notranslate">IAllocator</span> that is directly usable by
non-templated code.
</div>
<div class="description">Usually <span class="d_inlinecode donthyphenate notranslate"><span class="def-anchor" id="CAllocatorImpl"></span><span class="ddoc_psymbol">CAllocatorImpl</span></span> is used indirectly by calling
<a href="#theAllocator"><span class="d_inlinecode donthyphenate notranslate">theAllocator</span></a>.</div>

<dl><dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.impl"></span><div class="quickindex" id="quickindex.CAllocatorImpl.impl"></div>ref Allocator <span class="def-anchor" id="impl"></span><span class="ddoc_psymbol">impl</span>();
<br></div></dt>
<dd><div class="summary">The implementation is available as a public member.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.this"></span><div class="quickindex" id="quickindex.CAllocatorImpl.this"></div>this(Allocator* <i>pa</i>);
<br></div></dt>
<dd><div class="summary">The implementation is available as a public member.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.alignment"></span><div class="quickindex" id="quickindex.CAllocatorImpl.alignment"></div>@property uint <span class="def-anchor" id="alignment"></span><span class="ddoc_psymbol">alignment</span>();
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="alignment"></span><span class="ddoc_psymbol">alignment</span></span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.goodAllocSize"></span><div class="quickindex" id="quickindex.CAllocatorImpl.goodAllocSize"></div>size_t <span class="def-anchor" id="goodAllocSize"></span><span class="ddoc_psymbol">goodAllocSize</span>(size_t <i>s</i>);
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="goodAllocSize"></span><span class="ddoc_psymbol">goodAllocSize</span>(<i>s</i>)</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.allocate"></span><div class="quickindex" id="quickindex.CAllocatorImpl.allocate"></div>void[] <span class="def-anchor" id="allocate"></span><span class="ddoc_psymbol">allocate</span>(size_t <i>s</i>, TypeInfo <i>ti</i> = null);
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="allocate"></span><span class="ddoc_psymbol">allocate</span>(<i>s</i>)</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.alignedAllocate"></span><div class="quickindex" id="quickindex.CAllocatorImpl.alignedAllocate"></div>void[] <span class="def-anchor" id="alignedAllocate"></span><span class="ddoc_psymbol">alignedAllocate</span>(size_t <i>s</i>, uint <i>a</i>);
<br></div></dt>
<dd><div class="summary">If <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="alignedAllocate"></span><span class="ddoc_psymbol">alignedAllocate</span></span> exists, calls it and returns the result.
    Otherwise, always returns <span class="d_inlinecode donthyphenate notranslate">null</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.owns"></span><div class="quickindex" id="quickindex.CAllocatorImpl.owns"></div>Ternary <span class="def-anchor" id="owns"></span><span class="ddoc_psymbol">owns</span>(void[] <i>b</i>);
<br></div></dt>
<dd><div class="summary">If <span class="d_inlinecode donthyphenate notranslate">Allocator</span> implements <span class="d_inlinecode donthyphenate notranslate"><span class="def-anchor" id="owns"></span><span class="ddoc_psymbol">owns</span></span>, forwards to it. Otherwise, returns
    <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.expand"></span><div class="quickindex" id="quickindex.CAllocatorImpl.expand"></div>bool <span class="def-anchor" id="expand"></span><span class="ddoc_psymbol">expand</span>(ref void[] <i>b</i>, size_t <i>s</i>);
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="expand"></span><span class="ddoc_psymbol">expand</span>(<i>b</i>, <i>s</i>)</span> if defined, <span class="d_inlinecode donthyphenate notranslate"><b>false</b></span> otherwise.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.reallocate"></span><div class="quickindex" id="quickindex.CAllocatorImpl.reallocate"></div>bool <span class="def-anchor" id="reallocate"></span><span class="ddoc_psymbol">reallocate</span>(ref void[] <i>b</i>, size_t <i>s</i>);
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="reallocate"></span><span class="ddoc_psymbol">reallocate</span>(<i>b</i>, <i>s</i>)</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.alignedReallocate"></span><div class="quickindex" id="quickindex.CAllocatorImpl.alignedReallocate"></div>bool <span class="def-anchor" id="alignedReallocate"></span><span class="ddoc_psymbol">alignedReallocate</span>(ref void[] <i>b</i>, size_t <i>s</i>, uint <i>a</i>);
<br></div></dt>
<dd><div class="summary">Forwards to <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="alignedReallocate"></span><span class="ddoc_psymbol">alignedReallocate</span></span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.deallocate"></span><div class="quickindex" id="quickindex.CAllocatorImpl.deallocate"></div>bool <span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span>(void[] <i>b</i>);
<br></div></dt>
<dd><div class="summary">If <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span></span> is not defined, returns <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>. If
    <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span></span> returns <span class="d_inlinecode donthyphenate notranslate">void</span> (the common case), calls it and
    returns <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span>. If <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="deallocate"></span><span class="ddoc_psymbol">deallocate</span></span> returns <span class="d_inlinecode donthyphenate notranslate">bool</span>, calls
    it and returns <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span> for <span class="d_inlinecode donthyphenate notranslate"><b>true</b></span>, <span class="d_inlinecode donthyphenate notranslate">Ternary.no</span> for <span class="d_inlinecode donthyphenate notranslate">    <b>false</b></span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.deallocateAll"></span><div class="quickindex" id="quickindex.CAllocatorImpl.deallocateAll"></div>bool <span class="def-anchor" id="deallocateAll"></span><span class="ddoc_psymbol">deallocateAll</span>();
<br></div></dt>
<dd><div class="summary">Calls <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="deallocateAll"></span><span class="ddoc_psymbol">deallocateAll</span>()</span> and returns <span class="d_inlinecode donthyphenate notranslate">Ternary.yes</span> if defined,
    otherwise returns <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.empty"></span><div class="quickindex" id="quickindex.CAllocatorImpl.empty"></div>Ternary <span class="def-anchor" id="empty"></span><span class="ddoc_psymbol">empty</span>();
<br></div></dt>
<dd><div class="summary">Forwards to <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="empty"></span><span class="ddoc_psymbol">empty</span>()</span> if defined, otherwise returns
    <span class="d_inlinecode donthyphenate notranslate">Ternary.unknown</span>.</div>

</dd>
<dt class="d_decl"><div ><span class="def-anchor" id=".CAllocatorImpl.allocateAll"></span><div class="quickindex" id="quickindex.CAllocatorImpl.allocateAll"></div>void[] <span class="def-anchor" id="allocateAll"></span><span class="ddoc_psymbol">allocateAll</span>();
<br></div></dt>
<dd><div class="summary">Returns <span class="d_inlinecode donthyphenate notranslate">impl.<span class="def-anchor" id="allocateAll"></span><span class="ddoc_psymbol">allocateAll</span>()</span> if present, <span class="d_inlinecode donthyphenate notranslate"><b>null</b></span> otherwise.</div>

</dd>
</dl>
</dd>
</dl>

        <div class="smallprint" id="copyright">Andrei Alexandrescu 2013-.

 | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on (no date time)</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>

<script type="text/javascript" src="../js/listanchors.js"></script>
<script type="text/javascript" src="../js/show_contributors.js"></script>
<script type="text/javascript">jQuery(document).ready(listanchors);</script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
