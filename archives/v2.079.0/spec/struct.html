
<!DOCTYPE html>
<html lang="en-US">
<!--
    Copyright (c) 1999-2018 by the D Language Foundation
    All Rights Reserved.
    https://dlang.org/foundation_overview.html
  -->
<head>
<meta charset="utf-8">
<meta name="keywords" content="D programming language">
<meta name="description" content="D Programming Language">
<title>Structs, Unions - D Programming Language</title>

<link rel="stylesheet" href="../css/codemirror.css">
<link rel="stylesheet" href="../css/style.css">
<link rel="stylesheet" href="../css/print.css" media="print">
<link rel="shortcut icon" href="../favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=10.0">

</head>
<body id='Structs, Unions' class='doc'>
<script type="text/javascript">document.body.className += ' have-javascript'</script>
<div id="top"><div class="helper"><div class="helper expand-container">    <div class="logo"><a href=".."><img id="logo" alt="D Logo" src="../images/dlogo.svg"></a></div>
    <a href="../menu.html" title="Menu" class="hamburger expand-toggle"><span>Menu</span></a>
    
<div id="cssmenu"><ul>    <li><a href='https://tour.dlang.org'><span>Learn</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../documentation.html'><span>Documentation</span></a>
      
<ul class='expand-content'>    <li><a href='../spec/spec.html'>Language Reference</a></li>
    <li><a href='../phobos/index.html'>Library Reference</a></li>
    <li><a href='../dmd.html'>Command-line Reference</a></li>
    <li class="menu-divider"><a href='../comparison.html'>Feature Overview</a></li>
    <li><a href='../articles.html'>Articles</a></li>
 </ul></li>
    <li><a href='../download.html'><span>Downloads</span></a></li>
    <li><a href='https://code.dlang.org'><span>Packages</span></a></li>
    <li class='expand-container'><a class='expand-toggle' href='../community.html'><span>Community</span></a>
      
<ul class='expand-content'>    <li><a href='https://dlang.org/blog'>Blog</a></li>
    <li><a href='../orgs-using-d.html'>Orgs using D</a></li>
    <li><a href='https://twitter.com/search?q=%23dlang'>Twitter</a></li>
    <li><a href='../calendar.html'>Calendar</a></li>
    <li class="menu-divider"><a href='https://forum.dlang.org'>Forums</a></li>
    <li><a href='irc://irc.freenode.net/d'>IRC</a></li>
    <li><a href='https://wiki.dlang.org'>Wiki</a></li>
    <li class="menu-divider"><a href='https://github.com/dlang'>GitHub</a></li>
    <li><a href='../bugstats.html'>Issues</a></li>
    <li><a href='https://wiki.dlang.org/Get_involved'>Get involved</a></li>
    <li class="menu-divider"><a href='../foundation/contributors.html'>Contributors</a></li>
    <li><a href='../foundation/index.html'>Foundation</a></li>
    <li><a href='../foundation/donate.html'>Donate</a></li>
    <li><a href='../foundation/sponsors.html'>Sponsors</a></li>
 </ul></li>
    <li class='expand-container'><a class='expand-toggle' href='../resources.html'><span>Resources</span></a>
      
<ul class='expand-content'>    <li><a href='https://tour.dlang.org'>Tour</a></li>
    <li><a href='https://wiki.dlang.org/Books'>Books</a></li>
    <li><a href='https://wiki.dlang.org/Tutorials'>Tutorials</a></li>
    <li class="menu-divider"><a href='https://wiki.dlang.org/Development_tools'>Tools</a></li>
    <li><a href='https://wiki.dlang.org/Editors'>Editors</a></li>
    <li><a href='https://wiki.dlang.org/IDEs'>IDEs</a></li>
    <li><a href='http://rainers.github.io/visuald/visuald/StartPage.html'>Visual D</a></li>
    <li class="menu-divider"><a href='../acknowledgements.html'>Acknowledgments</a></li>
    <li><a href='../dstyle.html'>D Style</a></li>
    <li><a href='../glossary.html'>Glossary</a></li>
    <li><a href='../sitemap.html'>Sitemap</a></li>
 </ul></li>
</ul></div>
    <div class="search-container expand-container">        <a href="../search.html" class="expand-toggle" title="Search"><span>Search</span></a>
        
    <div id="search-box">        <form method="get" action="https://google.com/search">
            <input type="hidden" id="domains" name="domains" value="dlang.org">
            <input type="hidden" id="sourceid" name="sourceid" value="google-search">
            <span id="search-query"><input id="q" name="q" placeholder="Search"></span><span id="search-dropdown"><span class="helper">                <select id="sitesearch" name="sitesearch" size="1">
                    <option value="dlang.org">Entire Site</option>
                    <option selected value="dlang.org/spec">Language</option>
                    <option  value="dlang.org/phobos">Library</option>
                    <option  value="forum.dlang.org">Forums</option>
                    
                </select>
            </span></span><span id="search-submit"><button type="submit"><i class="fa fa-search"></i><span>go</span></button></span>
        </form>
    </div>
    </div>
</div></div></div>

<div class="container">    
<div class="subnav-helper"></div> <div class="subnav">    <div class="head"><h5>Language Reference</h5> <p class="subnav-duplicate"><a href="../spec/spec.html">table of contents</a></p></div>
    <ul>        <li><a href='            ../spec/intro.html'>Introduction</a></li><li><a href='            ../spec/lex.html'>Lexical</a></li><li><a href='            ../spec/grammar.html'>Grammar</a></li><li><a href='            ../spec/module.html'>Modules</a></li><li><a href='            ../spec/declaration.html'>Declarations</a></li><li><a href='            ../spec/type.html'>Types</a></li><li><a href='            ../spec/property.html'>Properties</a></li><li><a href='            ../spec/attribute.html'>Attributes</a></li><li><a href='            ../spec/pragma.html'>Pragmas</a></li><li><a href='            ../spec/expression.html'>Expressions</a></li><li><a href='            ../spec/statement.html'>Statements</a></li><li><a href='            ../spec/arrays.html'>Arrays</a></li><li><a href='            ../spec/hash-map.html'>Associative Arrays</a></li><li><a href='            ../spec/struct.html'>Structs and Unions</a></li><li><a href='            ../spec/class.html'>Classes</a></li><li><a href='            ../spec/interface.html'>Interfaces</a></li><li><a href='            ../spec/enum.html'>Enums</a></li><li><a href='            ../spec/const3.html'>Type Qualifiers</a></li><li><a href='            ../spec/function.html'>Functions</a></li><li><a href='            ../spec/operatoroverloading.html'>Operator Overloading</a></li><li><a href='            ../spec/template.html'>Templates</a></li><li><a href='            ../spec/template-mixin.html'>Template Mixins</a></li><li><a href='            ../spec/contracts.html'>Contract Programming</a></li><li><a href='            ../spec/version.html'>Conditional Compilation</a></li><li><a href='            ../spec/traits.html'>Traits</a></li><li><a href='            ../spec/errors.html'>Error Handling</a></li><li><a href='            ../spec/unittest.html'>Unit Tests</a></li><li><a href='            ../spec/garbage.html'>Garbage Collection</a></li><li><a href='            ../spec/float.html'>Floating Point</a></li><li><a href='            ../spec/iasm.html'>D x86 Inline Assembler</a></li><li><a href='            ../spec/ddoc.html'>Embedded Documentation</a></li><li><a href='            ../spec/interfaceToC.html'>Interfacing to C</a></li><li><a href='            ../spec/cpp_interface.html'>Interfacing to C++</a></li><li><a href='            ../spec/objc_interface.html'>Interfacing to Objective-C</a></li><li><a href='            ../spec/portability.html'>Portability Guide</a></li><li><a href='            ../spec/entity.html'>Named Character Entities</a></li><li><a href='            ../spec/memory-safe-d.html'>Memory Safety</a></li><li><a href='            ../spec/abi.html'>Application Binary Interface</a></li><li><a href='            ../spec/simd.html'>Vector Extensions</a></li><li><a href='            ../spec/betterc.html'>Better C
        </a></li>
    </ul>
</div>
    <div class="hyphenate" id="content">        
<div id="tools"><div >	<div class="tip smallprint">		<a href="https://issues.dlang.org/enter_bug.cgi?bug_file_loc=http%3A%2F%2Fdlang.org/&amp;component=dlang.org&amp;op_sys=All&amp;priority=P3&amp;product=D&amp;rep_platform=All&amp;short_desc=%5BStructs, Unions%5D&amp;version=D2&amp;bug_severity=enhancement">Report a bug</a>
		<div >			If you spot a problem with this page, click here to create a Bugzilla issue.
		</div>
	</div>
	<div class="tip smallprint">		<a href="https://github.com/dlang/dlang.org/edit/master/spec/struct.dd">Improve this page</a>
		<div >			Quickly fork, edit online, and submit a pull request for this page.
			Requires a signed-in GitHub account. This works well for small changes.
			If you'd like to make larger changes you may want to consider using
			a local clone.
		</div>
	</div>
</div></div>
        <h1>Structs, Unions</h1>
        
<style>    body { counter-reset: h1 14; counter-increment: h1 -1; }
    h1 { counter-reset: h2 h3 p; }
    h2 { counter-reset: h3 h4 p; }
    h3 { counter-reset: h4 p; }
    h4 { counter-reset: p; }
    h1::before {
        counter-increment: h1;
        content: counter(h1) ". ";
    }
    h2::before {
        counter-increment: h2;
        content: counter(h1) "." counter(h2) " ";
    }
    h3::before {
        counter-increment: h3;
        content: counter(h1) "." counter(h2) "." counter(h3) " ";
    }
    h4::before {
        counter-increment: h4;
        content: counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) " ";
    }
    p::before, .spec-boxes::before {
        counter-increment: p;
        content: counter(p) ". ";
    }
    h1::before, h2::before, h3::before, h4::before, p::before, .spec-boxes::before
    {
        color: #999;
        font-size: 80%;
        margin-right: 0.25em;
    }
</style>
        <div class="blankline"></div>
<div class="blankline"></div>
<div class="blankline"></div>
<div class="page-contents quickindex">    <div class="page-contents-header">        <b>Contents</b>
    </div>
    <ol>    <li><a href="#struct_layout">Struct Layout</a></li>
    <li><a href="#POD">Plain Old Data</a></li>
    <li><a href="#opaque_struct_unions">Opaque Structs and Unions</a></li>
    <li><a href="#static_struct_init">Static Initialization of Structs</a></li>
    <li><a href="#static_union_init">Static Initialization of Unions</a></li>
    <li><a href="#dynamic_struct_init">Dynamic Initialization of Structs</a></li>
    <li><a href="#struct-literal">Struct Literals</a></li>
    <li><a href="#struct_properties">Struct Properties</a></li>
    <li><a href="#struct_instance_properties">Struct Instance Properties</a></li>
    <li><a href="#struct_field_properties">Struct Field Properties</a></li>
    <li><a href="#const-struct">Const, Immutable and Shared Structs</a></li>
    <li><a href="#struct-constructor">Struct Constructors</a></li>
    <li><a href="#struct-postblit">Struct Postblits</a></li>
    <li><a href="#struct-destructor">Struct Destructors</a></li>
    <li><a href="#StructInvariant">Struct Invariants</a></li>
    <li><a href="#assign-overload">Identity Assignment Overload</a></li>
    <li><a href="#nested">Nested Structs</a></li>
    <li><a href="#unions_and_special_memb_funct">Unions and Special Member Functions</a></li>
</ol>
</div>
<div class="blankline"></div>
    <p>Whereas classes are reference types, structs are value types.
    Structs and unions are simple aggregations of data and their
    associated operations on that data.
    </p>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="AggregateDeclaration"><span class="gname">AggregateDeclaration</span></a>:
    <a href="../spec/class.html#ClassDeclaration"><i>ClassDeclaration</i></a>
    <a href="../spec/interface.html#InterfaceDeclaration"><i>InterfaceDeclaration</i></a>
    <a href="#StructDeclaration"><i>StructDeclaration</i></a>
    <a href="#UnionDeclaration"><i>UnionDeclaration</i></a>
<div class="blankline"></div>
<a id="StructDeclaration"><span class="gname">StructDeclaration</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">struct</span> <i>Identifier</i> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">struct</span> <i>Identifier</i> <a href="#AggregateBody"><i>AggregateBody</i></a>
    <a href="../spec/template.html#StructTemplateDeclaration"><i>StructTemplateDeclaration</i></a>
    <a href="#AnonStructDeclaration"><i>AnonStructDeclaration</i></a>
<div class="blankline"></div>
<a id="AnonStructDeclaration"><span class="gname">AnonStructDeclaration</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">struct</span> <a href="#AggregateBody"><i>AggregateBody</i></a>
<div class="blankline"></div>
<a id="UnionDeclaration"><span class="gname">UnionDeclaration</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">union</span> <i>Identifier</i> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">union</span> <i>Identifier</i> <a href="#AggregateBody"><i>AggregateBody</i></a>
    <a href="../spec/template.html#UnionTemplateDeclaration"><i>UnionTemplateDeclaration</i></a>
    <a href="#AnonUnionDeclaration"><i>AnonUnionDeclaration</i></a>
<div class="blankline"></div>
<a id="AnonUnionDeclaration"><span class="gname">AnonUnionDeclaration</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">union</span> <a href="#AggregateBody"><i>AggregateBody</i></a>
<div class="blankline"></div>
<a id="AggregateBody"><span class="gname">AggregateBody</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">{</span> <a href="../spec/module.html#DeclDefs"><i>DeclDefs</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">}</span>
</pre>
<div class="blankline"></div>
    <p>A struct is defined to not have an identity; that is,
    the implementation is free to make bit copies of the struct
    as convenient.</p>
<div class="blankline"></div>
    <p>Structs and unions may not contain an instance of themselves,
    however, they may contain a pointer to the same type.
    </p>
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b>     <ol>    <li>Bit fields are supported with the
    <a href="https://dlang.org/phobos/std_bitmanip.html#bitfields">bitfields</a> template.</li>
    </ol></div>


<div class="blankline"></div>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="struct_layout" href="#struct_layout">Struct Layout</a></h2>
<div class="blankline"></div>
    <p>The non-static data members of a struct are called <i>fields</i>. Fields are laid
    out in lexical order. Fields are aligned according to the <a href="../spec/attribute.html#align">Align Attribute</a>
    in effect.
    Unnamed padding is inserted between fields to align fields. There is no padding between
    the first field and the start of the object.
    </p>
<div class="blankline"></div>
    <p>Non-static <a href="#nested">function-nested D structs</a>, which access the context of
    their enclosing scope, have an extra field.
    </p>
<div class="blankline"></div>
    <div class="spec-boxes implementation-defined"><b>Implementation Defined</b>:     <ol>    <li>The default layout of the fields of a struct is an exact
    match with the <i>associated C compiler</i>.</li>
    </ol></div>


<div class="blankline"></div>
    <div class="spec-boxes undefined-behavior"><b>Undefined Behavior</b>:     <ol>    <li>The padding data can be accessed, but its contents are undefined.</li>
    </ol></div>
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b>     <ol>    <li>When laying out a struct to match an externally defined layout, use align
    attributes to describe an exact match. Using a <a href="../spec/version.html#static-assert">Static Assert</a>
    to ensure the result is as expected.</li>
    <li>Although the contents of the padding are often zero, do not rely on that.</li>
    </ol></div>


<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="POD" href="#POD">Plain Old Data</a></h2>
<div class="blankline"></div>
    <p>A struct or union is <i>Plain Old Data</i> (POD) if it meets the following criteria:</p>
<div class="blankline"></div>
    <ol>    <li>it is not nested</li>
    <li>it has no postblits, destructors, or assignment operators</li>
    <li>it has no <span class="d_inlinecode donthyphenate notranslate">ref</span> fields or fields that are themselves non-POD</li>
    </ol>
<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b> Structs or unions that interface with C code should be POD.</div>


<div class="blankline"></div>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="opaque_struct_unions" href="#opaque_struct_unions">Opaque Structs and Unions</a></h2>
<div class="blankline"></div>
    <p>Opaque struct and union declarations do not have a <a href="#AggregateBody"><i>AggregateBody</i></a>:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S;
<span class="d_keyword">union</span> U;
</pre>
<div class="blankline"></div>
        <p>The members are completely hidden to the user, and so the only operations
        on those types are ones that do not require any knowledge of the contents
        of those types. For example:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S;
S.sizeof; <span class="d_comment">// error, size is not known
</span>S s;      <span class="d_comment">// error, cannot initialize unknown contents
</span>S* p;     <span class="d_comment">// ok, knowledge of members is not necessary
</span></pre>
<div class="blankline"></div>
        <p>They can be used to implement the
        <a href="https://en.wikipedia.org/wiki/Opaque_pointer">PIMPL idiom</a>.</p>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="static_struct_init" href="#static_struct_init">Static Initialization of Structs</a></h2>
<div class="blankline"></div>
        <p>Static struct members are by default initialized to whatever the
        default initializer for the member is, and if none is supplied, to
        the default initializer for the member's type.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> a = 4; <span class="d_keyword">int</span> b; }
<span class="d_keyword">static</span> S x; <span class="d_comment">// a is set to 4, b to 0
</span></pre>
<div class="blankline"></div>
        <p>If a static initializer is supplied, the
        members are initialized by the <span class="d_inlinecode donthyphenate notranslate">memberName:expression</span> syntax.
        The members may be initialized in any order.
        Initializers for statics must be evaluatable at
        compile time. Members not specified in the initializer list are default
        initialized.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> a, b, c, d = 7; }
<span class="d_keyword">static</span> S x = { a:1, b:2 };           <span class="d_comment">// c is set to 0, d to 7
</span><span class="d_keyword">static</span> S z = { c:4, b:5, a:2, d:5 }; <span class="d_comment">// z.a = 2, z.b = 5, z.c = 4, z.d = 5
</span></pre>
<div class="blankline"></div>
<p>C-style initialization, based on the order of the members in the struct
declaration, is also supported:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">static</span> S q = { 1, 2 }; <span class="d_comment">// q.a = 1, q.b = 2, q.c = 0, q.d = 7
</span></pre>
<div class="blankline"></div>
        <p>The two styles can be combined:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">static</span> S q = { 1, d:3 }; <span class="d_comment">// q.a = 1, q.b = 0, q.c = 0, q.d = 3
</span></pre>
<div class="blankline"></div>
        <p>Struct literals can also be used to initialize statics, but
        they must be evaluable at compile time.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">static</span> S q = S( 1, 2+3 ); <span class="d_comment">// q.a = 1, q.b = 5, q.c = 0, q.d = 7
</span></pre>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="static_union_init" href="#static_union_init">Static Initialization of Unions</a></h2>
<div class="blankline"></div>
<p>Unions are initialized explicitly.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">union</span> U { <span class="d_keyword">int</span> a; <span class="d_keyword">double</span> b; }
<span class="d_keyword">static</span> U u = { b : 5.0 }; <span class="d_comment">// u.b = 5.0
</span></pre>
<div class="blankline"></div>
<p>Other members of the union that overlay the initializer, but occupy more
storage, have the extra storage initialized to zero.</p>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="dynamic_struct_init" href="#dynamic_struct_init">Dynamic Initialization of Structs</a></h2>
<div class="blankline"></div>
        <p>The <a href="#static_struct_init">static initializer syntax</a>
        can also be used to initialize non-static variables.
        The initializer need not be evaluable at compile time.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> a, b, c, d = 7; }

<span class="d_keyword">void</span> test(<span class="d_keyword">int</span> i)
{
    S q = { 1, b:i }; <span class="d_comment">// q.a = 1, q.b = i, q.c = 0, q.d = 7
</span>}
</pre>
<div class="blankline"></div>
        <p>Structs can be dynamically initialized from another
        value of the same type:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> a; }
S t;      <span class="d_comment">// default initialized
</span>t.a = 3;
S s = t;  <span class="d_comment">// s.a is set to 3
</span></pre>
<div class="blankline"></div>
        <p>If <span class="d_inlinecode donthyphenate notranslate">opCall</span> is overridden for the struct, and the struct
        is initialized with a value that is of a different type,
        then the <span class="d_inlinecode donthyphenate notranslate">opCall</span> operator is called:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span> a;

    <span class="d_keyword">static</span> S <b><i>opCall</i></b>(<span class="d_keyword">int</span> v)
    {
        S s;
        s.a = v;
        <span class="d_keyword">return</span> s;
    }

    <span class="d_keyword">static</span> S <b><i>opCall</i></b>(S v)
    {
        <span class="d_keyword">assert</span>(0);
    }
}

S s = 3; <span class="d_comment">// sets s.a to 3 using S.opCall(int)
</span>S t = s; <span class="d_comment">// sets t.a to 3, S.opCall(S) is not called
</span></pre>
<div class="blankline"></div>
<h2><span id="StructLiteral"><a class="anchor" title="Permalink to this section" id="struct-literal" href="#struct-literal">Struct Literals</a></span></h2>
<div class="blankline"></div>
        <p>Struct literals consist of the name of the struct followed
        by a parenthesized argument list:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> x; <span class="d_keyword">float</span> y; }

<span class="d_keyword">int</span> foo(S s) { <span class="d_keyword">return</span> s.x; }

foo( S(1, 2) ); <span class="d_comment">// set field x to 1, field y to 2
</span></pre>
<div class="blankline"></div>
        <p>Struct literals are syntactically like function calls.
        If a struct has a member function named <span class="d_inlinecode donthyphenate notranslate">opCall</span>, then
        struct literals for that struct are not possible. See also
        <a href="../spec/operatoroverloading.html#FunctionCall">opCall operator overloading</a>
        for the issue workaround.
        It is an error if there are more arguments than fields of
        the struct.
        If there are fewer arguments than fields, the remaining
        fields are initialized with their respective default
        initializers.
        If there are anonymous unions in the struct, only the first
        member of the anonymous union can be initialized with a
        struct literal, and all subsequent non-overlapping fields are default
        initialized.
        </p>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="struct_properties" href="#struct_properties">Struct Properties</a></h2>
<div class="blankline"></div>
<center><table><caption>Struct Properties</caption><tr><th class="donthyphenate"><b>Name</b></th><th class="donthyphenate"><b>Description</b></th></tr>
<tr><td><span class="d_inlinecode donthyphenate notranslate">.sizeof</span></td><td>Size in bytes of struct</td></tr>
<tr><td><span class="d_inlinecode donthyphenate notranslate">.alignof</span></td><td>Size boundary struct needs to be aligned on</td></tr>
</table></center>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="struct_instance_properties" href="#struct_instance_properties">Struct Instance Properties</a></h2>
<div class="blankline"></div>
<center><table><caption>Struct Instance Properties</caption><tr><th class="donthyphenate"><b>Name</b></th><th class="donthyphenate"><b>Description</b></th></tr>
<tr><td><span class="d_inlinecode donthyphenate notranslate">.tupleof</span></td><td>An <a href="../spec/template.html#variadic-templates">expression sequence</a>
    of all struct fields - see
    <a href="../spec/class.html#class_properties">Class Properties</a> for a class-based example.</td></tr>
</table></center>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="struct_field_properties" href="#struct_field_properties">Struct Field Properties</a></h2>
<div class="blankline"></div>
<center><table><caption>Struct Field Properties</caption><tr><th class="donthyphenate"><b>Name</b></th><th class="donthyphenate"><b>Description</b></th></tr>
<tr><td><span class="d_inlinecode donthyphenate notranslate">.offsetof</span></td><td>Offset in bytes of field from beginning of struct</td></tr>
</table></center>
<div class="blankline"></div>
<h2><span id="ConstStruct"><a class="anchor" title="Permalink to this section" id="const-struct" href="#const-struct">Const, Immutable and Shared Structs</a></span></h2>
<div class="blankline"></div>
        <p>A struct declaration can have a storage class of
        <span class="d_inlinecode donthyphenate notranslate">const</span>, <span class="d_inlinecode donthyphenate notranslate">immutable</span> or <span class="d_inlinecode donthyphenate notranslate">shared</span>. It has an equivalent
        effect as declaring each member of the struct as
        <span class="d_inlinecode donthyphenate notranslate">const</span>, <span class="d_inlinecode donthyphenate notranslate">immutable</span> or <span class="d_inlinecode donthyphenate notranslate">shared</span>.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">const</span> <span class="d_keyword">struct</span> S { <span class="d_keyword">int</span> a; <span class="d_keyword">int</span> b = 2; }

<span class="d_keyword">void</span> main()
{
    S s = S(3); <span class="d_comment">// initializes s.a to 3
</span>    S t;        <span class="d_comment">// initializes t.a to 0
</span>    t = s;      <span class="d_comment">// error, t.a and t.b are const, so cannot modify them.
</span>    t.a = 4;    <span class="d_comment">// error, t.a is const
</span>}
</pre>
<div class="blankline"></div>
<h2><span id="Struct-Constructor"><a class="anchor" title="Permalink to this section" id="struct-constructor" href="#struct-constructor">Struct Constructors</a></span></h2>
<div class="blankline"></div>
        <p>Struct constructors are used to initialize an instance
        of a struct.
        The <i>ParameterList</i> may not be empty.
        Struct instances that are not instantiated with a constructor
        are default initialized to their <span class="d_inlinecode donthyphenate notranslate">.init</span> value.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span> x, y;

    <span class="d_keyword">this</span>()  <span class="d_comment">// error, cannot implement default ctor for structs
</span>    {
    }

    <span class="d_keyword">this</span>(<span class="d_keyword">int</span> a, <span class="d_keyword">int</span> b)
    {
        x = a;
        y = b;
    }
}

<span class="d_keyword">void</span> main()
{
    S a = S(4, 5);
    <span class="d_keyword">auto</span> b = S();  <span class="d_comment">// same as auto b = S.init;
</span>}
</pre>
<div class="blankline"></div>

<div class="blankline"></div>
        <p>A constructor qualifier allows the object to be constructed with
        that specific qualifier.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S1
{
    <span class="d_keyword">int</span>[] a;
    <span class="d_keyword">this</span>(<span class="d_keyword">int</span> n) { a = <span class="d_keyword">new</span> <span class="d_keyword">int</span>[](n); }
}
<span class="d_keyword">struct</span> S2
{
    <span class="d_keyword">int</span>[] a;
    <span class="d_keyword">this</span>(<span class="d_keyword">int</span> n) <span class="d_keyword">immutable</span> { a = <span class="d_keyword">new</span> <span class="d_keyword">int</span>[](n); }
}
<span class="d_keyword">void</span> main()
{
    <span class="d_comment">// Mutable constructor creates mutable object.
</span>    S1 m1 = S1(1);

    <span class="d_comment">// Constructed mutable object is implicitly convertible to const.
</span>    <span class="d_keyword">const</span> S1 c1 = S1(1);

    <span class="d_comment">// Constructed mutable object is not implicitly convertible to immutable.
</span>    <span class="d_comment">// immutable i1 = S1(1);
</span>
    <span class="d_comment">// Mutable constructor cannot construct immutable object.
</span>    <span class="d_comment">// auto x1 = immutable S1(1);
</span>
    <span class="d_comment">// Immutable constructor cannot construct mutable object.
</span>    <span class="d_comment">// auto x2 = S2(1);
</span>
    <span class="d_comment">// Constructed immutable object is not implicitly convertible to mutable.
</span>    <span class="d_comment">// S2 m2 = immutable S2(1);
</span>
    <span class="d_comment">// Constructed immutable object is implicitly convertible to const.
</span>    <span class="d_keyword">const</span> S2 c2 = <span class="d_keyword">immutable</span> S2(1);

    <span class="d_comment">// Immutable constructor creates immutable object.
</span>    <span class="d_keyword">immutable</span> i2 = <span class="d_keyword">immutable</span> S2(1);
}
</pre>
<div class="blankline"></div>
        <p>If struct constructor is annotated with <span class="d_inlinecode donthyphenate notranslate">@disable</span> and has
        empty parameter, the struct is disabled construction without calling
        other constructor.
        </p>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span> x;

    <span class="d_comment">// Disables default construction, function body can be empty.
</span>    @disable <span class="d_keyword">this</span>();

    <span class="d_keyword">this</span>(<span class="d_keyword">int</span> v) { x = v; }
}
<span class="d_keyword">void</span> main()
{
    <span class="d_comment">//S s;        // default construction is disabled
</span>    <span class="d_comment">//S s = S();  // also disabled
</span>    S s = S(1);   <span class="d_comment">// construction with calling constructor
</span>}
</pre>
<div class="blankline"></div>
<h2><span id="StructPostblit"><a class="anchor" title="Permalink to this section" id="struct-postblit" href="#struct-postblit">Struct Postblits</a></span></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="Postblit"><span class="gname">Postblit</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">this ( this )</span> <a href="../spec/function.html#MemberFunctionAttributes"><i>MemberFunctionAttributes</i></a><sub>opt</sub> <span class="d_inlinecode donthyphenate notranslate">;</span>
    <span class="d_inlinecode donthyphenate notranslate">this ( this )</span> <a href="../spec/function.html#MemberFunctionAttributes"><i>MemberFunctionAttributes</i></a><sub>opt</sub> <a href="../spec/function.html#FunctionBody"><i>FunctionBody</i></a>
</pre>
<div class="blankline"></div>
        <p><i>Copy construction</i> is defined as initializing
         a struct instance from another struct of the same type.
         Copy construction is divided into two parts:</p>
<div class="blankline"></div>
        <ol>        <li>blitting the fields, i.e. copying the bits</li>
        <li>running <i>postblit</i> on the result</li>
        </ol>
<div class="blankline"></div>
        <p>The first part is done automatically by the language,
        the second part is done if a postblit function is defined
        for the struct.
        The postblit has access only to the destination struct object,
        not the source.
        Its job is to &lsquo;fix up&rsquo; the destination as necessary, such as
        making copies of referenced data, incrementing reference counts,
        etc. For example:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span>[] a;    <span class="d_comment">// array is privately owned by this instance
</span>    <span class="d_keyword">this</span>(<span class="d_keyword">this</span>)
    {
        a = a.dup;
    }
}
</pre>
<div class="blankline"></div>
        <p>Disabling struct postblit makes the object not copyable.
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> T
{
    @disable <span class="d_keyword">this</span>(<span class="d_keyword">this</span>);  <span class="d_comment">// disabling makes T not copyable
</span>}
<span class="d_keyword">struct</span> S
{
    T t;   <span class="d_comment">// uncopyable member makes S also not copyable
</span>}

<span class="d_keyword">void</span> main()
{
    S s;
    S t = s; <span class="d_comment">// error, S is not copyable
</span>}
</pre>
<div class="blankline"></div>
        <p>Unions may not have fields that have postblits.</p>
<div class="blankline"></div>
<h2><span id="StructDestructor"><a class="anchor" title="Permalink to this section" id="struct-destructor" href="#struct-destructor">Struct Destructors</a></span></h2>
<div class="blankline"></div>
        <p>Destructors are called when an object goes out of scope.
        Their purpose is to free up resources owned by the struct
        object.
        </p>
<div class="blankline"></div>
        <p>Unions may not have fields that have destructors.</p>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="StructInvariant" href="#StructInvariant">Struct Invariants</a></h2>
<div class="blankline"></div>
<pre class="bnf notranslate"><a id="StructInvariant"><span class="gname">StructInvariant</span></a>:
    <span class="d_inlinecode donthyphenate notranslate">invariant ( )</span> <a href="../spec/statement.html#BlockStatement"><i>BlockStatement</i></a>
    <span class="d_inlinecode donthyphenate notranslate">invariant</span> <a href="../spec/statement.html#BlockStatement"><i>BlockStatement</i></a>
</pre>
<div class="blankline"></div>
    <p><i>StructInvariant</i>s specify the relationships among the members of a struct instance.
    Those relationships must hold for any interactions with the instance from its
    public interface.
    </p>
<div class="blankline"></div>
    <p>The invariant is in the form of a <span class="d_inlinecode donthyphenate notranslate">const</span> member function. The invariant is defined
    to <i>hold</i> if all the <a href="../spec/expression.html#AssertExpression"><i>AssertExpression</i></a>s within the invariant that are executed
    succeed.
    </p>
<div class="blankline"></div>
    <p>If the invariant does not hold, then the program enters an invalid state.</p>
<div class="blankline"></div>
    <p>Any invariants for fields are applied before the struct invariant.</p>
<div class="blankline"></div>
    <p>There may be multiple invariants in a struct. They are applied in lexical order.</p>
<div class="blankline"></div>
    <p><i>StructInvariant</i>s must hold at the exit of the struct constructor (if any),
    and at the entry of the struct destructor (if any).</p>
<div class="blankline"></div>
    <p><i>StructInvariant</i>s must hold
    at the entry and exit of all public or exported non-static member functions.
    The order of application of invariants is:
    <ol>    <li>preconditions</li>
    <li>invariant</li>
    <li>function body</li>
    <li>invariant</li>
    <li>postconditions</li>
    </ol>
    </p>
<div class="blankline"></div>
    <p>The invariant need not hold if the struct instance is implicitly constructed using
    the default <span class="d_inlinecode donthyphenate notranslate">.init</span> value.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Date
{
    <span class="d_keyword">this</span>(<span class="d_keyword">int</span> d, <span class="d_keyword">int</span> h)
    {
        day = d;    <span class="d_comment">// days are 1..31
</span>        hour = h;   <span class="d_comment">// hours are 0..23
</span>    }

    <span class="d_keyword">invariant</span>
    {
        <span class="d_keyword">assert</span>(1 &lt;= day &amp;&amp; day &lt;= 31);
        <span class="d_keyword">assert</span>(0 &lt;= hour &amp;&amp; hour &lt; 24);
    }

  <span class="d_keyword">private</span>:
    <span class="d_keyword">int</span> day;
    <span class="d_keyword">int</span> hour;
}
</pre>
<div class="blankline"></div>
    <p>Public or exported non-static member functions cannot be called from within an invariant.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> Foo
{
    <span class="d_keyword">public</span> <span class="d_keyword">void</span> f() { }
    <span class="d_keyword">private</span> <span class="d_keyword">void</span> g() { }

    <span class="d_keyword">invariant</span>
    {
        f();  <span class="d_comment">// error, cannot call public member function from invariant
</span>        g();  <span class="d_comment">// ok, g() is not public
</span>    }
}
</pre>
<div class="blankline"></div>
    <div class="spec-boxes undefined-behavior"><b>Undefined Behavior</b>: happens if the invariant does not hold and execution continues.</div>
<div class="blankline"></div>
    <div class="spec-boxes implementation-defined"><b>Implementation Defined</b>:     <ol>    <li>Whether the <i>StructInvariant</i> is executed at runtime or not. This is typically
    controlled with a compiler switch.</li>
    <li>The behavior when the invariant does not hold is typically the same as
    for when <a href="../spec/expression.html#AssertExpression"><i>AssertExpression</i></a>s fail.</li>
    </ol>
    </div>


<div class="blankline"></div>
    <div class="spec-boxes best-practice"><b>Best Practices:</b>     <ol>    <li>Do not indirectly call exported or public member functions within a struct invariant,
    as this can result in infinite recursion.</li>
    <li>Avoid reliance on side effects in the invariant. as the invariant may or may not
    be executed.</li>
    <li>Avoid having mutable public fields of structs with invariants,
    as then the invariant cannot verify the public interface.</li>
    </ol>
    </div>


<div class="blankline"></div>
<div class="blankline"></div>
<div class="blankline"></div>
<h2><span id="AssignOverload"><a class="anchor" title="Permalink to this section" id="assign-overload" href="#assign-overload">Identity Assignment Overload</a></span></h2>
<div class="blankline"></div>
        <p>While copy construction takes care of initializing
        an object from another object of the same type,
        or elaborate destruction is needed for the type,
        assignment is defined as copying the contents of one
        object over another, already initialized, type:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S { ... }  <span class="d_comment">// S has postblit or destructor
</span>S s;      <span class="d_comment">// default construction of s
</span>S t = s;  <span class="d_comment">// t is copy-constructed from s
</span>t = s;    <span class="d_comment">// t is assigned from s
</span></pre>
<div class="blankline"></div>
        <p>Struct assignment <span class="d_inlinecode donthyphenate notranslate">t=s</span> is defined to be semantically
        equivalent to:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate">t.opAssign(s);
</pre>
<div class="blankline"></div>
        <p>where <span class="d_inlinecode donthyphenate notranslate">opAssign</span> is a member function of S:</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">ref</span> S opAssign(<span class="d_keyword">ref</span> S s)
{
    S tmp = <span class="d_keyword">this</span>;   <span class="d_comment">// bitcopy this into tmp
</span>    <span class="d_keyword">this</span> = s;       <span class="d_comment">// bitcopy s into this
</span>    tmp.__dtor();   <span class="d_comment">// call destructor on tmp
</span>    <span class="d_keyword">return</span> <span class="d_keyword">this</span>;
}
</pre>
<div class="blankline"></div>
        <p>An identity assignment overload is required for a struct if one or more of
        these conditions hold:</p>
<div class="blankline"></div>
        <ul>        <li>it has a <a href="#struct-destructor">destructor</a></li>
        <li>it has a <a href="#struct-postblit">postblit</a></li>
        <li>it has a field with an identity assignment overload</li>
        </ul>
<div class="blankline"></div>
        <p>If an identity assignment overload is required and does not
        exist, an identity assignment overload function of the type
        <span class="d_inlinecode donthyphenate notranslate">ref S opAssign(ref S)</span>  will be automatically generated.</p>
<div class="blankline"></div>
        <p>A user-defined one can implement the equivalent semantics, but can
        be more efficient.
        </p>
<div class="blankline"></div>
        <p>One reason a custom <span class="d_inlinecode donthyphenate notranslate">opAssign</span> might be more efficient
        is if the struct has a reference to a local buffer:
        </p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">struct</span> S
{
    <span class="d_keyword">int</span>[] buf;
    <span class="d_keyword">int</span> a;

    <span class="d_keyword">ref</span> S opAssign(<span class="d_keyword">ref</span> <span class="d_keyword">const</span> S s)
    {
        a = s.a;
        <span class="d_keyword">return</span> <span class="d_keyword">this</span>;
    }

    <span class="d_keyword">this</span>(<span class="d_keyword">this</span>)
    {
        buf = buf.dup;
    }
}
</pre>
<div class="blankline"></div>
        <p>Here, <span class="d_inlinecode donthyphenate notranslate">S</span> has a temporary workspace <span class="d_inlinecode donthyphenate notranslate">buf[]</span>.
        The normal postblit
        will pointlessly free and reallocate it. The custom <span class="d_inlinecode donthyphenate notranslate">opAssign</span>
        will reuse the existing storage.
        </p>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="nested" href="#nested">Nested Structs</a></h2>
<div class="blankline"></div>
    <p>A <i>nested struct</i> is a struct that is declared inside the scope
        of a function or a templated struct that has aliases to local
        functions as a template argument.
        Nested structs have member functions.
        It has access to the context of its enclosing scope
        (via an added hidden field).</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">void</span> foo()
{
    <span class="d_keyword">int</span> i = 7;
    <span class="d_keyword">struct</span> SS
    {
        <span class="d_keyword">int</span> x,y;
        <span class="d_keyword">int</span> bar() { <span class="d_keyword">return</span> x + i + 1; }
    }
    SS s;
    s.x = 3;
    s.bar(); <span class="d_comment">// returns 11
</span>}
</pre>
<div class="blankline"></div>
    <p>A struct can be prevented from being nested by
        using the static attribute, but then of course it
        will not be able to access variables from its enclosing
        scope.</p>
<div class="blankline"></div>
<pre class="d_code notranslate"><span class="d_keyword">void</span> foo()
{
    <span class="d_keyword">int</span> i = 7;
    <span class="d_keyword">static</span> <span class="d_keyword">struct</span> SS
    {
        <span class="d_keyword">int</span> x, y;
        <span class="d_keyword">int</span> bar()
        {
            <span class="d_keyword">return</span> i; <span class="d_comment">// error, SS is not a nested struct
</span>        }
    }
}
</pre>
<div class="blankline"></div>
<h2><a class="anchor" title="Permalink to this section" id="unions_and_special_memb_funct" href="#unions_and_special_memb_funct">Unions and Special Member Functions</a></h2>
<div class="blankline"></div>
    <p>Unions may not have postblits, destructors, or invariants.</p>
<div class="blankline"></div>

<div style="float: left"><i class="fa fa-angle-left" aria-hidden="true"></i> <a href="../spec/hash-map.html">Associative Arrays</a></div>
<div style="float: right"><a href="../spec/class.html">Classes</a> <i class="fa fa-angle-right" aria-hidden="true"></i></div>
<div style="clear:both"></div>



        <div class="smallprint" id="copyright">Copyright &copy; 1999-2018 by the <a href="../foundation_overview.html">D Language Foundation</a> | Page generated by
<a href="../spec/ddoc.html">Ddoc</a> on Tue Mar 13 17:31:54 2018
</div>
    </div>
</div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">window.jQuery || document.write('\x3Cscript src="../js/jquery-1.7.2.min.js">\x3C/script>');</script>
    <script type="text/javascript" src="../js/dlang.js"></script>
    
    <script type="text/javascript" src="../js/codemirror-compressed.js"></script>
    <script type="text/javascript" src="../js/run.js"></script>


<script type="text/javascript" src="../js/listanchors.js"></script>
<script type="text/javascript">jQuery(document).ready(addVersionSelector);</script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</body>
</html>
